{"ast":null,"code":"import _objectSpread from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/cdi_5/agri_thesis_front/src/components/products/ProductAddEdit.js\";\nimport React, { Component } from 'react';\nimport { withRouter, NavLink } from 'react-router-dom';\nimport { Row, Col, Button } from 'reactstrap';\nimport * as API from '../../services/API';\nimport InputDisplays from '../InputDisplays.js';\nimport { AvForm } from 'availity-reactstrap-validation';\nimport { Helpers, TOAST } from '../../helpers/helpers'; // import { Helpers, lS, DefaultState, TOAST, OPTIONS  } from '../helpers/helpers'\n\nimport Loader from '../Loader';\n\nvar qs = require('query-string');\n\nvar ProductAddEdit =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductAddEdit, _Component);\n\n  function ProductAddEdit() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProductAddEdit);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProductAddEdit)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.urlSearch = qs.parse(_this.props.history.location.search);\n    _this.state = {\n      data: {},\n      isLoading: _this.props.method === 'Update' ? true : false,\n      fields: [{\n        title: \"Product Details\",\n        inputs: [{\n          name: \"name\",\n          label: \"Name\",\n          type: \"text\",\n          isRequired: true,\n          validators: {\n            required: {\n              value: true,\n              errorMessage: \"Please enter first name\"\n            }\n          }\n        }, {\n          name: \"description\",\n          label: \"Description\",\n          type: \"text\",\n          isRequired: true,\n          validators: {\n            required: {\n              value: true,\n              errorMessage: \"Please enter description\"\n            }\n          }\n        }, {\n          name: \"price\",\n          label: \"Price\",\n          type: \"number\",\n          isRequired: true,\n          pre: 'P',\n          validators: {\n            required: {\n              value: true,\n              errorMessage: \"Please enter price\"\n            },\n            min: {\n              value: 0,\n              errorMessage: \"Price must be valid\"\n            }\n          }\n        }, {\n          name: \"file\",\n          label: \"Photo\",\n          type: \"file\",\n          isRequired: false,\n          handleInputChange: function handleInputChange(e) {\n            _this.setState({\n              file_name: e.target.value,\n              file: e.target.files[0]\n            });\n          }\n        }]\n      }]\n    };\n    _this.prevColumn = _this.state.columns || {};\n\n    _this.selectActionToggled = function (item) {\n      _this.setState({\n        itemData: item\n      });\n    };\n\n    _this.showCreateItemCreateModal = function () {\n      _this.setState(function (oldState) {\n        return {\n          isCreateModalOpen: !oldState.isCreateModalOpen\n        };\n      });\n    };\n\n    _this.responseGetItems = function (response) {\n      var st = _this.state;\n      response = response || {};\n      response.data = response.data || [];\n      var configState = {\n        data: response.data,\n        total: response.total,\n        totalPage: Math.ceil((response.total || 0) / st.pageState.limit) // configState.totalPage = Math.ceil(configState.data.length / st.pageState.limit) \n\n      };\n\n      _this.setState(configState);\n    };\n\n    _this.changeKeyValue = function (key, value) {\n      _this.setState(function (oldState) {\n        return _defineProperty({}, key, value || !oldState[key]);\n      });\n    };\n\n    _this.formHandleChange = function (e, v) {\n      var st = _this.state;\n      var name = typeof e === \"object\" ? e.target.name : e;\n      var value = typeof e === \"object\" ? e.target.value : v;\n      var newData = Helpers.setDataIterate(name, value)(st.data, '');\n\n      _this.setState({\n        data: newData\n      });\n    };\n\n    _this.getProduct = function () {\n      var id = _this.props.match.params.id;\n      API.getProduct(id).then(function (response) {\n        _this.setState({\n          data: response.data\n        });\n      }, function (err) {\n        TOAST.pop({\n          message: err.message,\n          type: 'error'\n        });\n      }).finally(function () {\n        return _this.setState({\n          isLoading: false,\n          has_submit: false\n        });\n      });\n    };\n\n    _this.handleSubmit = function (event, values) {\n      var method = _this.props.method;\n\n      _this.setState({\n        has_submit: true\n      });\n\n      if (method === 'Create') {\n        _this.handleCreateSubmit(values);\n      } else {\n        _this.handleUpdateSubmit(values);\n      }\n    };\n\n    _this.handleCreateSubmit = function (values) {\n      // values.file = this.state.file\n      delete values.file;\n      var formData = new FormData();\n      formData.append('name', values.name);\n      formData.append('description', values.description);\n      formData.append('price', values.price);\n      _this.state.file && formData.append(\"file\", _this.state.file);\n      API.createProduct(formData).then(function (response) {\n        _this.props.history.goBack();\n\n        TOAST.pop({\n          message: 'Successfully created product!'\n        });\n      }, function (err) {\n        TOAST.pop({\n          message: err.message,\n          type: 'error'\n        });\n      }).finally(function () {\n        return _this.setState({\n          has_submit: false\n        });\n      });\n    };\n\n    _this.handleUpdateSubmit = function (values) {\n      var id = _this.props.match.params.id;\n      var formData = new FormData();\n      delete values.file;\n      formData.append('name', values.name);\n      formData.append('description', values.description);\n      formData.append('price', values.price);\n      _this.state.file && formData.append(\"file\", _this.state.file);\n      API.updateProduct(formData, id).then(function (response) {\n        _this.props.history.goBack();\n\n        TOAST.pop({\n          message: 'Successfully updated product!'\n        });\n      }, function (err) {\n        TOAST.pop({\n          message: err.message,\n          type: 'error'\n        });\n      }).finally(function () {\n        return _this.setState({\n          has_submit: false\n        });\n      });\n    };\n\n    _this.resetForm = function () {\n      _this.form && _this.form.reset(); // this.form._inputs.status.value = this.state.defaultStatus\n    };\n\n    _this.toggleLoading = function (flag) {\n      _this.setState(function (oldState) {\n        return {\n          searchLoading: flag\n        };\n      });\n    };\n\n    _this.toggleButton = function (path) {\n      _this.props.history.push(path);\n    };\n\n    _this.componentDidMount = function () {\n      var method = _this.props.method;\n\n      if (method === 'Update') {\n        _this.getProduct();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(ProductAddEdit, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var st = this.state;\n      this.setState({\n        checkData: [],\n        data: []\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var that = this;\n      var st = this.state;\n      var _this$state = this.state,\n          data = _this$state.data,\n          fields = _this$state.fields;\n      var method = this.props.method;\n      var inputs = fields.reduce(function (inputs, step) {\n        return _objectSpread({}, inputs, _defineProperty({}, step.title, step.inputs));\n      }, {});\n      return React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: \"8\",\n        sm: \"11\",\n        xs: \"11\",\n        style: {\n          border: '2px solid rgb(252, 168, 108)',\n          padding: '20px',\n          margin: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(Loader, {\n        isLoading: st.isLoading || false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, method, \" Products!\"), React.createElement(AvForm, {\n        onValidSubmit: this.handleSubmit,\n        ref: function ref(c) {\n          return _this2.form = c;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 12,\n        sm: 12,\n        md: 12,\n        lg: 10,\n        style: {\n          margin: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(InputDisplays, {\n        inputs: inputs,\n        data: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }))), React.createElement(Row, {\n        className: \"margin-bottom-md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 12,\n        sm: 12,\n        md: 12,\n        lg: 10,\n        align: \"right\",\n        style: {\n          margin: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"button\",\n        color: \"secondary\" // className=\"float-left\"\n        ,\n        style: {\n          marginRight: '20px'\n        },\n        onClick: this.resetForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"Clear\"), React.createElement(Button, {\n        type: \"submit\" // className=\"float-right\" \n        ,\n        color: \"primary\",\n        disabled: st.has_submit,\n        onClick: this.createUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"Submit\")))))));\n    }\n  }]);\n\n  return ProductAddEdit;\n}(Component);\n\nexport default withRouter(ProductAddEdit);","map":{"version":3,"sources":["/home/cdi_5/agri_thesis_front/src/components/products/ProductAddEdit.js"],"names":["React","Component","withRouter","NavLink","Row","Col","Button","API","InputDisplays","AvForm","Helpers","TOAST","Loader","qs","require","ProductAddEdit","urlSearch","parse","props","history","location","search","state","data","isLoading","method","fields","title","inputs","name","label","type","isRequired","validators","required","value","errorMessage","pre","min","handleInputChange","e","setState","file_name","target","file","files","prevColumn","columns","selectActionToggled","item","itemData","showCreateItemCreateModal","oldState","isCreateModalOpen","responseGetItems","response","st","configState","total","totalPage","Math","ceil","pageState","limit","changeKeyValue","key","formHandleChange","v","newData","setDataIterate","getProduct","id","match","params","then","err","pop","message","finally","has_submit","handleSubmit","event","values","handleCreateSubmit","handleUpdateSubmit","formData","FormData","append","description","price","createProduct","goBack","updateProduct","resetForm","form","reset","toggleLoading","flag","searchLoading","toggleButton","path","push","componentDidMount","checkData","that","reduce","step","border","padding","margin","textAlign","c","marginRight","createUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter, NavLink } from 'react-router-dom' \nimport { Row, Col, Button } from 'reactstrap'\n\nimport * as API from '../../services/API'\n\nimport InputDisplays from '../InputDisplays.js'\nimport { AvForm } from 'availity-reactstrap-validation'\nimport { Helpers, TOAST } from '../../helpers/helpers'\n\n// import { Helpers, lS, DefaultState, TOAST, OPTIONS  } from '../helpers/helpers'\n\nimport Loader from '../Loader'\n\nconst qs = require('query-string');\n\nclass ProductAddEdit extends Component {\n    urlSearch = qs.parse(this.props.history.location.search)\n    state = {\n        data: {},\n        isLoading: this.props.method==='Update' ? true : false,\n        fields: [\n            {\n                title: \"Product Details\",\n                inputs: [\n                    {\n                        name: \"name\",\n                        label: \"Name\",\n                        type: \"text\",\n                        isRequired: true,\n                        validators: {\n                            required: {value: true, errorMessage: \"Please enter first name\"}, \n                        }\n                    },\n                    {\n                        name: \"description\",\n                        label: \"Description\",\n                        type: \"text\",\n                        isRequired: true,\n                        validators: {\n                            required: {value: true, errorMessage: \"Please enter description\"}, \n                        }\n                    },\n                    {\n                        name: \"price\",\n                        label: \"Price\",\n                        type: \"number\",\n                        isRequired: true,\n                        pre: 'P',\n                        validators: {\n                            required: {value: true, errorMessage: \"Please enter price\"}, \n                            min: {value: 0, errorMessage: \"Price must be valid\"}\n                        }\n                    },{\n                        name: \"file\",\n                        label: \"Photo\",\n                        type: \"file\",\n                        isRequired: false,\n                        handleInputChange: (e) => {\n                            this.setState({file_name : e.target.value, file: e.target.files[0]})\n                        }\n                    }\n                ]\n            }, \n        ]\n    }\n\n    prevColumn = this.state.columns || {}\n\n    selectActionToggled = (item) => {\n        this.setState({\n            itemData: item\n        })\n    }\n    showCreateItemCreateModal = () => {\n        this.setState((oldState) => ({\n            isCreateModalOpen: !oldState.isCreateModalOpen\n        }))\n    }\n\n    responseGetItems = (response) => {\n        const st = this.state\n        response = response || {}\n        response.data = response.data || [];\n        let configState = {\n            data: response.data,\n            total: response.total,\n            totalPage: Math.ceil( (response.total || 0) / st.pageState.limit) \n        }\n        // configState.totalPage = Math.ceil(configState.data.length / st.pageState.limit) \n        this.setState(configState)\n    }\n\n    changeKeyValue = (key, value) => {\n        this.setState((oldState)=>({\n            [key]: value || !oldState[key]\n        }))\n    }\n\n    formHandleChange = (e, v) => {\n        const st = this.state\n        let name = (typeof e === \"object\") ? e.target.name : e\n        let value = (typeof e === \"object\") ? e.target.value : v\n        let newData = Helpers.setDataIterate(name, value)(st.data, '')\n        this.setState({ data: newData})\n    } \n\n    getProduct = () => {\n        const {id} = this.props.match.params\n        API.getProduct(id)\n        .then((response)=>{\n            this.setState({data: response.data})\n        }, err => {\n            TOAST.pop({message: err.message, type: 'error'})\n        }).finally(()=> \n            this.setState({isLoading: false, has_submit: false})\n        )\n    }\n\n    handleSubmit = (event, values) => {\n        const {method} = this.props\n        this.setState({has_submit: true})\n        if(method==='Create'){\n            this.handleCreateSubmit(values)\n        } else {\n            this.handleUpdateSubmit(values)\n        }\n    }\n\n    handleCreateSubmit = (values) => {\n        // values.file = this.state.file\n        delete values.file\n        const formData = new FormData();  \n        formData.append('name', values.name);  \n        formData.append('description', values.description);  \n        formData.append('price', values.price);  \n        this.state.file && formData.append(\"file\", this.state.file);  \n        API.createProduct(formData)\n        .then((response)=>{\n            this.props.history.goBack()\n            TOAST.pop({message: 'Successfully created product!'})\n        }, err => {\n            TOAST.pop({message: err.message, type: 'error'})\n        }).finally(()=> \n            this.setState({has_submit: false})\n        )\n    } \n\n    handleUpdateSubmit = (values) => {\n        const {id} = this.props.match.params\n        const formData = new FormData();  \n        delete values.file\n        formData.append('name', values.name);  \n        formData.append('description', values.description);  \n        formData.append('price', values.price); \n        this.state.file && formData.append(\"file\", this.state.file);  \n        API.updateProduct(formData, id)\n        .then((response)=>{\n            this.props.history.goBack()\n            TOAST.pop({message: 'Successfully updated product!'})\n        }, err => {\n            TOAST.pop({message: err.message, type: 'error'})\n        }).finally(()=> \n        this.setState({has_submit: false})\n        )\n    } \n\n    resetForm = () => {\n        this.form && this.form.reset() \n        // this.form._inputs.status.value = this.state.defaultStatus\n    }\n\n    toggleLoading = (flag) => {\n        this.setState(oldState => ({searchLoading: flag}))\n    }\n    toggleButton = (path) => {\n        this.props.history.push(path)\n    }\n\n    componentDidMount = () => {\n        const {method} = this.props\n\n        if(method==='Update'){\n            this.getProduct()\n        }\n    }\n\n    componentWillUnmount() {\n        const st = this.state\n        this.setState({checkData: [], data: [] })\n    }\n\n    render() {\n        const that = this\n        const st=this.state;\n\n        const {data, fields} = this.state\n        const {method} = this.props\n        const inputs = fields.reduce((inputs, step) => {\n            return {\n                ...inputs,\n                [step.title]: step.inputs,\n            }\n        }, {})\n        return(\n            <Row >\n                <Col lg=\"8\" sm=\"11\" xs=\"11\" style={{border: '2px solid rgb(252, 168, 108)', padding: '20px', margin: 'auto'}}>\n                    <Loader \n                        isLoading={st.isLoading || false}\n                    />\n                    <div > \n                        <h4 style={{textAlign: 'center'}}>{method} Products!</h4>\n                        <AvForm onValidSubmit={this.handleSubmit} ref={c => (this.form = c)}> \n                            <Row>\n                                <Col xs={12} sm={12} md={12} lg={10} style={{margin: 'auto'}}>\n                                    <InputDisplays \n                                        inputs={inputs}\n                                        data={data} \n                                    />\n                                </Col>\n                                {/* <Col xs={12} sm={12} md={12} lg={6}></Col> */}\n                            </Row>\n                            <Row className=\"margin-bottom-md\">\n                                <Col xs={12} sm={12} md={12} lg={10} align=\"right\" style={{margin: 'auto'}}>\n                                    <Button \n                                        type=\"button\" \n                                        color=\"secondary\" \n                                        // className=\"float-left\"\n                                        style={{marginRight: '20px'}}\n                                        onClick={this.resetForm} >Clear</Button>\n                                    <Button \n                                        type=\"submit\" \n                                        // className=\"float-right\" \n                                        color=\"primary\"\n                                        disabled={st.has_submit}\n                                        onClick={this.createUser}>Submit</Button>\n                                </Col>\n                                {/* <Col xs={12} sm={12} md={12} lg={6}></Col> */}\n                            </Row>\n                        </AvForm>\n                        \n                    </div>\n                </Col>\n            </Row>\n        ) ;\n    }\n}\n\nexport default withRouter(ProductAddEdit);"]},"metadata":{},"sourceType":"module"}