{"ast":null,"code":"import _toConsumableArray from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/cdi_5/agri_thesis_front/src/components/Users.js\";\nimport React, { Component } from 'react';\nimport { withRouter, NavLink } from 'react-router-dom';\nimport { Row, Col, Button } from 'reactstrap';\nimport ReactTable from 'react-table';\nimport * as API from '../services/API';\nimport * as Session from '../services/session';\nimport { Helpers, lS, DefaultState, TOAST, OPTIONS, gDp, DATE_FORMAT } from '../helpers/helpers';\nimport SearchBar from './SearchBar.js';\nimport ConfirmModal from '../modals/ConfirmModal';\nimport { FaTrashAlt, FaEdit } from 'react-icons/fa/';\nimport Loader from './Loader';\n\nvar qs = require('query-string'); // React table ref: https://react-table.js.org/#/story/readme\n\n\nvar Users =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Users, _Component);\n\n  function Users() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Users);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Users)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.urlSearch = qs.parse(_this.props.history.location.search);\n    _this.state = {\n      data: [],\n      query: _this.urlSearch.search || '',\n      confirmUser: {\n        username: ''\n      },\n      pageState: {\n        page: parseInt(_this.urlSearch.page || 0) > 0 ? parseInt(_this.urlSearch.page || 0) - 1 : 0,\n        limit: parseInt(_this.urlSearch.limit || 10),\n        sort_id: _this.urlSearch.sort_id || '',\n        sort_desc: _this.urlSearch.sort_desc || 'desc',\n        search: _this.urlSearch.search || ''\n      },\n      columns: [// {\n      //     Header: \"ID\",\n      //     headerClassName: 'text-left',\n      //     accessor: \"id\",\n      //     Cell: row=> Helpers.handleDisplay(row.value)\n      // },\n      {\n        Header: \"Username\",\n        headerClassName: 'text-left',\n        accessor: \"username\",\n        Cell: function Cell(row) {\n          return Helpers.handleDisplay(row.value);\n        }\n      }, {\n        Header: \"Name\",\n        headerClassName: 'text-left',\n        accessor: \"last_name\",\n        Cell: function Cell(row) {\n          return Helpers.handleDisplay((row.original.last_name ? row.original.last_name + ', ' : '') + row.original.first_name || '');\n        }\n      }, {\n        Header: \"Email\",\n        headerClassName: 'text-left',\n        accessor: \"email\",\n        Cell: function Cell(row) {\n          return Helpers.handleDisplay(row.value);\n        }\n      }, {\n        Header: \"Phone Number\",\n        headerClassName: 'text-left',\n        accessor: \"phone_number\",\n        Cell: function Cell(row) {\n          return Helpers.handleDisplay(row.value);\n        }\n      }, {\n        Header: \"Address\",\n        headerClassName: 'text-left',\n        accessor: \"address\",\n        Cell: function Cell(row) {\n          return Helpers.handleDisplay(row.value);\n        }\n      }, {\n        Header: \"Date\",\n        headerClassName: 'text-left',\n        sortable: false,\n        accessor: \"created\",\n        Cell: function Cell(row) {\n          return Helpers.handleDate(row.value, DATE_FORMAT);\n        }\n      }, {\n        Header: \"Role\",\n        headerClassName: 'text-left',\n        accessor: \"role\",\n        Cell: function Cell(row) {\n          return Helpers.handleDisplay(row.value);\n        }\n      }, {\n        Header: \"Action\",\n        headerClassName: 'text-right grid',\n        accessor: \"_actions_\",\n        width: 70,\n        Cell: function Cell(row) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88\n            },\n            __self: this\n          }, React.createElement(Button, {\n            color: \"danger\",\n            onClick: function onClick() {\n              return _this.setState({\n                isItemModalOpen: true,\n                confirmUser: row.original\n              });\n            },\n            className: \"form-control-sm-font-size input-text-sm-pd input-height-xsm button-adjust-padding-sm\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89\n            },\n            __self: this\n          }, React.createElement(FaTrashAlt, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91\n            },\n            __self: this\n          })), \"\\xA0\", React.createElement(Button, {\n            color: \"primary\",\n            onClick: function onClick() {\n              return _this.props.history.push(\"/user/update/\".concat(row.original.id));\n            },\n            className: \"form-control-sm-font-size input-text-sm-pd input-height-xsm button-adjust-padding-sm\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93\n            },\n            __self: this\n          }, React.createElement(FaEdit, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            },\n            __self: this\n          })));\n        }\n      }]\n    };\n    _this.prevColumn = _this.state.columns || {};\n\n    _this.selectActionToggled = function (item) {\n      _this.setState({\n        itemData: item\n      });\n    };\n\n    _this.showCreateItemCreateModal = function () {\n      _this.setState(function (oldState) {\n        return {\n          isCreateModalOpen: !oldState.isCreateModalOpen\n        };\n      });\n    };\n\n    _this.responseGetItems = function (response) {\n      var st = _this.state;\n      response = response || {\n        data: []\n      };\n      response.data = response.data || [];\n      var configState = {\n        data: response.data,\n        total: response.count,\n        totalPage: Math.ceil((response.count || 0) / st.pageState.limit) // configState.totalPage = Math.ceil(configState.data.length / st.pageState.limit) \n\n      };\n\n      _this.setState(configState);\n    };\n\n    _this.deleteUser = function (row) {\n      var id = row.id;\n      API.deleteUser(row, id).then(function (response) {\n        TOAST.pop({\n          message: 'Successfully deleted user!'\n        });\n\n        _this.setState({\n          isItemModalOpen: false,\n          isConfirmClick: false\n        });\n\n        _this.fetchData();\n      }, function (err) {\n        TOAST.pop({\n          message: err.message,\n          type: 'error'\n        });\n\n        _this.setState({\n          isConfirmClick: false\n        });\n      });\n    };\n\n    _this.fetchData = function () {\n      document.getElementsByClassName('rt-tbody')[0].scrollTop = 0;\n\n      var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n      var st = _this.state;\n\n      _this.toggleLoading(true);\n\n      var params = {\n        page: st.pageState.page + 1,\n        limit: st.pageState.limit,\n        search: st.pageState.search,\n        sort_id: st.pageState.sort_id || '',\n        sort_desc: !st.pageState.sort_id ? '' : (st.pageState.sort_desc || '').toString() === 'true' ? 'desc' : 'asc'\n      };\n      API.getUsers({\n        params: params\n      }).then(function (response) {\n        _this.responseGetItems(response);\n      }, function (err) {\n        _this.setState({\n          data: []\n        });\n\n        TOAST.pop({\n          message: err.message,\n          type: 'error'\n        });\n      }).finally(function () {\n        _this.setState({\n          searchLoading: false,\n          apiParams: params\n        });\n      });\n    };\n\n    _this.changeKeyValue = function (key, value) {\n      _this.setState(function (oldState) {\n        return _defineProperty({}, key, value || !oldState[key]);\n      });\n    };\n\n    _this.handleSearch = function (e) {\n      var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n      var st = _this.state;\n      e.preventDefault();\n      Helpers.handlePage(that, {\n        page: 0,\n        limit: st.pageState.limit,\n        search: st.query,\n        sort_id: st.pageState.sort_id,\n        sort_desc: !!st.pageState.sort_desc\n      });\n    };\n\n    _this.toggleLoading = function (flag) {\n      _this.setState(function (oldState) {\n        return {\n          searchLoading: flag\n        };\n      });\n    };\n\n    _this.toggleButton = function (path) {\n      _this.props.history.push(path);\n    };\n\n    _this.componentDidMount = function () {\n      Helpers.callBackMessageToastPop();\n\n      _this.setState({\n        searchLoading: true,\n        mounted: true,\n        checkData: [],\n        data: []\n      }, function () {\n        _this.fetchData();\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Users, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      var _this2 = this;\n\n      var st = this.state;\n      var filters_array = Helpers.objectToArray(st.pageState.filter, true) || [];\n      this.setState({\n        showAdvancedSearch: filters_array.length > 0\n      });\n\n      if (typeof st.mounted !== 'undefined') {\n        var pageQs = qs.parse(this.props.history.location.search);\n        this.setState({\n          pageState: {\n            page: parseInt(pageQs.page || 0) > 0 ? parseInt(pageQs.page || 0) - 1 : 0,\n            limit: parseInt(pageQs.limit || 10),\n            search: st.query,\n            sort_id: pageQs.sort_id || st.pageState.sort_id,\n            sort_desc: !!pageQs.sort_desc\n          }\n        }, function () {\n          _this2.fetchData();\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.setState({\n        checkData: [],\n        data: []\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var that = this;\n      var st = this.state;\n      var original = st.selected || {};\n      st.data = st.data.map(function (d) {\n        return _objectSpread({}, d, {\n          check: st.checkData.filter(function (cData) {\n            return d.id === cData.id;\n          }).length > 0\n        });\n      });\n      st.columns = _toConsumableArray(this.prevColumn);\n      return React.createElement(\"div\", {\n        style: {\n          margin: '0 5% 15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pad-md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(Col, {\n        className: \"margin-bottom-md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"3\",\n        className: \"margin-bottom-sm\",\n        style: {\n          marginBottom: '10px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        query: st.query,\n        placeholder: 'Search User',\n        loading: st.searchLoading,\n        didSearch: this.handleSearch,\n        onChangeQuery: function onChangeQuery(e) {\n          _this3.setState({\n            query: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      })), React.createElement(Col, {\n        align: \"right\",\n        style: {\n          marginBottom: '10px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"primary\",\n        onClick: function onClick() {\n          return _this3.props.history.push('/user/create');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"Add User\"))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(ReactTable, Object.assign({}, _objectSpread({}, Helpers.reactTableDefault({\n        st: st,\n        that: that\n      })), {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      })))))), React.createElement(ConfirmModal, {\n        size: \"sm\",\n        takeAction: function takeAction() {\n          return _this3.deleteUser(st.confirmUser);\n        },\n        isOpen: st.isItemModalOpen,\n        isConfirmClick: st.isConfirmClick,\n        error: st.errorDelete,\n        itemData: original,\n        modalTitle: 'Delete User',\n        modalBody: React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269\n          },\n          __self: this\n        }, \"Are you sure you want to delete user \", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269\n          },\n          __self: this\n        }, st.confirmUser.username), \" ?\"),\n        onDeleteItem: this.fetchData,\n        toggle: function toggle() {\n          _this3.changeKeyValue(\"isItemModalOpen\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      })), React.createElement(Loader, {\n        message: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, \"Loading...\")),\n        isLoading: st.isLoading || false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Users;\n}(Component);\n\nexport default withRouter(Users);","map":{"version":3,"sources":["/home/cdi_5/agri_thesis_front/src/components/Users.js"],"names":["React","Component","withRouter","NavLink","Row","Col","Button","ReactTable","API","Session","Helpers","lS","DefaultState","TOAST","OPTIONS","gDp","DATE_FORMAT","SearchBar","ConfirmModal","FaTrashAlt","FaEdit","Loader","qs","require","Users","urlSearch","parse","props","history","location","search","state","data","query","confirmUser","username","pageState","page","parseInt","limit","sort_id","sort_desc","columns","Header","headerClassName","accessor","Cell","row","handleDisplay","value","original","last_name","first_name","sortable","handleDate","width","setState","isItemModalOpen","push","id","prevColumn","selectActionToggled","item","itemData","showCreateItemCreateModal","oldState","isCreateModalOpen","responseGetItems","response","st","configState","total","count","totalPage","Math","ceil","deleteUser","then","pop","message","isConfirmClick","fetchData","err","type","document","getElementsByClassName","scrollTop","that","toggleLoading","params","toString","getUsers","finally","searchLoading","apiParams","changeKeyValue","key","handleSearch","e","preventDefault","handlePage","flag","toggleButton","path","componentDidMount","callBackMessageToastPop","mounted","checkData","newProps","filters_array","objectToArray","filter","showAdvancedSearch","length","pageQs","selected","map","d","check","cData","margin","marginBottom","target","reactTableDefault","errorDelete","isLoading"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter, NavLink } from 'react-router-dom' \nimport { Row, Col, Button } from 'reactstrap'\nimport ReactTable from 'react-table'\n\nimport * as API from '../services/API'\nimport * as Session from '../services/session'\n\nimport { Helpers, lS, DefaultState, TOAST, OPTIONS, gDp, DATE_FORMAT  } from '../helpers/helpers'\n\nimport SearchBar from './SearchBar.js'\nimport ConfirmModal from '../modals/ConfirmModal'\n\nimport {FaTrashAlt, FaEdit} from 'react-icons/fa/'\nimport Loader from './Loader'\n\nconst qs = require('query-string');\n\n// React table ref: https://react-table.js.org/#/story/readme\n\nclass Users extends Component {\n    urlSearch = qs.parse(this.props.history.location.search)\n    state = {\n        data: [],\n        query: this.urlSearch.search || '',\n        confirmUser: {username: ''},\n        pageState: {\n            page: (parseInt(this.urlSearch.page || 0) > 0 ? (parseInt(this.urlSearch.page || 0) - 1 ) : 0),\n            limit: parseInt(this.urlSearch.limit || 10),\n            sort_id: this.urlSearch.sort_id || '',\n            sort_desc: this.urlSearch.sort_desc || 'desc',\n            search: this.urlSearch.search || '',\n        },\n        columns: [\n            // {\n            //     Header: \"ID\",\n            //     headerClassName: 'text-left',\n            //     accessor: \"id\",\n            //     Cell: row=> Helpers.handleDisplay(row.value)\n            // },\n            {\n                Header: \"Username\",\n                headerClassName: 'text-left',\n                accessor: \"username\",\n                Cell: row=> Helpers.handleDisplay(row.value)\n            },\n            {\n                Header: \"Name\",\n                headerClassName: 'text-left',\n                accessor: \"last_name\",\n                Cell: row=> Helpers.handleDisplay(((row.original.last_name) ? (row.original.last_name+', ') : '') + row.original.first_name || '')\n            },\n            {\n                Header: \"Email\",\n                headerClassName: 'text-left',\n                accessor: \"email\",\n                Cell: row=> Helpers.handleDisplay(row.value)\n            },\n            {\n                Header: \"Phone Number\",\n                headerClassName: 'text-left',\n                accessor: \"phone_number\",\n                Cell: row=> Helpers.handleDisplay(row.value)\n            },\n            {\n                Header: \"Address\",\n                headerClassName: 'text-left',\n                accessor: \"address\",\n                Cell: row=> Helpers.handleDisplay(row.value)\n            },{\n                Header: \"Date\",\n                headerClassName: 'text-left',\n                sortable: false,\n                accessor: \"created\",\n                Cell: row=> Helpers.handleDate(row.value, DATE_FORMAT)\n            },\n            {\n                Header: \"Role\",\n                headerClassName: 'text-left',\n                accessor: \"role\",\n                Cell: row=> Helpers.handleDisplay(row.value)\n            },\n            {\n                Header: \"Action\",\n                headerClassName: 'text-right grid',\n                accessor: \"_actions_\",\n                width: 70,\n                Cell: row=> {return <div>\n                        <Button color=\"danger\" onClick={()=>this.setState({isItemModalOpen: true, confirmUser: row.original})}\n                            className=\"form-control-sm-font-size input-text-sm-pd input-height-xsm button-adjust-padding-sm\">\n                            <FaTrashAlt/>\n                        </Button>&nbsp;\n                        <Button color=\"primary\" onClick={()=>this.props.history.push(`/user/update/${row.original.id}`)}\n                            className=\"form-control-sm-font-size input-text-sm-pd input-height-xsm button-adjust-padding-sm\">\n                            <FaEdit/>\n                        </Button>\n                    </div>\n                }\n            }\n        ],\n    }\n\n    prevColumn = this.state.columns || {}\n\n    selectActionToggled = (item) => {\n        this.setState({\n            itemData: item\n        })\n    }\n    showCreateItemCreateModal = () => {\n        this.setState((oldState) => ({\n            isCreateModalOpen: !oldState.isCreateModalOpen\n        }))\n    }\n\n    responseGetItems = (response) => { \n        const st = this.state\n        response = response || {data:[]}\n        response.data = response.data || []\n        let configState = {\n            data: response.data,\n            total: response.count,\n            totalPage: Math.ceil( (response.count || 0) / st.pageState.limit) \n        }\n        // configState.totalPage = Math.ceil(configState.data.length / st.pageState.limit) \n        this.setState(configState)\n    }\n    \n    deleteUser = (row) => {\n        const id = row.id\n        API.deleteUser(row, id)\n        .then((response)=>{\n            TOAST.pop({message: 'Successfully deleted user!'})\n            this.setState({isItemModalOpen: false, isConfirmClick: false})\n            this.fetchData()\n        }, err => {\n            TOAST.pop({message: err.message, type: 'error'})\n            this.setState({isConfirmClick: false})\n        })\n    }\n\n    fetchData = () => {\n\n        document.getElementsByClassName('rt-tbody')[0].scrollTop = 0;\n        const that = this;\n        const st = this.state\n        this.toggleLoading(true)\n        const params = { \n            page: (st.pageState.page+1),\n            limit: st.pageState.limit,\n            search: st.pageState.search,\n            sort_id: st.pageState.sort_id || '',\n            sort_desc: (!st.pageState.sort_id) ? '' :\n                       (st.pageState.sort_desc || '').toString() === 'true' ? 'desc' : 'asc',\n        }\n\n        API.getUsers({params})\n            .then(response => { \n                this.responseGetItems(response) \n            }, err=> {\n                this.setState({data:[]});\n                TOAST.pop({message: err.message, type: 'error'})\n            }).finally(()=>{\n                this.setState({ searchLoading: false, apiParams: params })\n            })\n    }\n\n    changeKeyValue = (key, value) => {\n        this.setState((oldState)=>({\n            [key]: value || !oldState[key]\n        }))\n    }\n\n    handleSearch = (e) => {\n        const that = this;\n        const st = this.state\n        e.preventDefault()\n        Helpers.handlePage(that, {page: 0, limit: st.pageState.limit, search: st.query, sort_id: st.pageState.sort_id, sort_desc: !!st.pageState.sort_desc })\n    }\n\n    toggleLoading = (flag) => {\n        this.setState(oldState => ({searchLoading: flag}))\n    }\n    toggleButton = (path) => {\n        this.props.history.push(path)\n    }\n\n    componentDidMount = () => {\n        Helpers.callBackMessageToastPop() \n        this.setState({searchLoading: true, mounted: true, checkData:[], data:[]},()=>{\n            this.fetchData()\n        })\n    }\n\n    componentWillReceiveProps(newProps) {\n        const st = this.state\n        const filters_array = Helpers.objectToArray(st.pageState.filter, true) || []\n        this.setState({showAdvancedSearch: filters_array.length > 0 })\n        if ( typeof st.mounted !== 'undefined') {\n            let pageQs = qs.parse(this.props.history.location.search)\n            this.setState({\n                pageState: {\n                    page: parseInt(pageQs.page || 0) > 0 ? ( parseInt(pageQs.page || 0) - 1): 0,\n                    limit: parseInt(pageQs.limit || 10),\n                    search: st.query,\n                    sort_id: pageQs.sort_id || st.pageState.sort_id,\n                    sort_desc: !!pageQs.sort_desc,\n                } \n            },()=>{\n                this.fetchData();\n            })\n        }\n    } \n\n    componentWillUnmount() {\n        this.setState({checkData: [], data: [] })\n    }\n\n    render() {\n        const that = this\n        const st=this.state;\n        const original = st.selected || {}\n        st.data = st.data.map(d=> ({ ...d, check: st.checkData.filter(cData=>d.id===cData.id).length > 0 }))\n        st.columns = [\n            ...this.prevColumn,\n        ]\n        \n        return (\n            <div style={{margin: '0 5% 15px'}}> \n                <div className=\"pad-md\">\n                    <Row>\n                        <Col className=\"margin-bottom-md\">\n                            <Row>\n                                <Col md=\"3\" className=\"margin-bottom-sm\"  style={{marginBottom: '10px'}}>\n                                    <SearchBar\n                                        query={st.query}\n                                        placeholder={'Search User'}\n                                        loading={st.searchLoading}\n                                        didSearch={this.handleSearch}\n                                        onChangeQuery={(e) => {this.setState({query: e.target.value})}}\n                                    />  \n                                </Col>\n                                <Col align=\"right\" style={{marginBottom: '10px'}}> \n                                    <Button color=\"primary\" onClick={()=>this.props.history.push('/user/create')}>\n                                        Add User\n                                    </Button>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col >\n                                    <ReactTable\n                                        {...{\n                                            ...Helpers.reactTableDefault({st, that: that}),\n                                        }}\n                                    />\n                                </Col>\n                            </Row>\n                        </Col>\n                    </Row>\n                    <ConfirmModal\n                        size=\"sm\"\n                        takeAction={()=>this.deleteUser(st.confirmUser)}\n                        isOpen={st.isItemModalOpen}\n                        isConfirmClick={st.isConfirmClick}\n                        error={st.errorDelete}\n                        itemData={original}\n                        modalTitle={'Delete User'}\n                        modalBody={ \n                            <p>Are you sure you want to delete user <strong>{st.confirmUser.username}</strong> ?</p>\n                        }\n                        onDeleteItem={this.fetchData}\n                        toggle={\n                            () => {\n                                this.changeKeyValue(\"isItemModalOpen\")\n                            }\n                        }\n                    />\n                </div>\n                <Loader\n                    message={(\n                        <div>\n                            {/* <h4>Fetching reports</h4> */}\n                            <p>Loading...</p>\n                        </div>\n                    )}\n                    isLoading={st.isLoading || false}\n                />\n            </div>\n        ) ;\n    }\n}\n\nexport default withRouter(Users);"]},"metadata":{},"sourceType":"module"}