{"ast":null,"code":"import _classCallCheck from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/cdi_5/agri_thesis_front/src/components/OrderDetails.js\";\nimport React, { Component } from 'react';\nimport { withRouter, NavLink } from 'react-router-dom';\nimport { Row, Col, Button } from 'reactstrap';\nimport ReactTable from 'react-table';\nimport * as API from '../services/API';\nimport * as Session from '../services/session';\nimport { Helpers, lS, DefaultState, TOAST, OPTIONS, gDp, DATE_FORMAT } from '../helpers/helpers';\nimport SearchBar from './SearchBar.js';\nimport ConfirmModal from '../modals/ConfirmModal';\nimport { FaTrashAlt, FaEdit } from 'react-icons/fa/';\nimport Loader from './Loader';\n\nvar qs = require('query-string'); // React table ref: https://react-table.js.org/#/story/readme\n\n\nvar OrderDetails =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OrderDetails, _Component);\n\n  function OrderDetails() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, OrderDetails);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(OrderDetails)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.urlSearch = qs.parse(_this.props.history.location.search);\n    _this.state = {\n      data: []\n    };\n    _this.prevColumn = _this.state.columns || {};\n\n    _this.toggleLoading = function (flag) {\n      _this.setState(function (oldState) {\n        return {\n          searchLoading: flag\n        };\n      });\n    };\n\n    _this.toggleButton = function (path) {\n      _this.props.history.push(path);\n    };\n\n    _this.componentDidMount = function () {\n      _this.apiRetrieve();\n    };\n\n    _this.apiRetrieve = function () {\n      var id = _this.props.match.params.id;\n      API.getOrder(id).then(function (response) {\n        _this.setState({\n          data: response.data\n        });\n      }, function (err) {\n        TOAST.pop(message = err.message, type = 'error');\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(OrderDetails, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var that = this;\n      var st = this.state;\n      var original = st.selected || {}; // st.data = st.data.map(d=> ({ ...d, check: st.checkData.filter(cData=>d.id===cData.id).length > 0 }))\n      // st.columns = [\n      //     ...this.prevColumn,\n      // ]\n\n      var messages = st.data.map(function (message) {\n        return React.createElement(\"div\", {\n          key: message.id,\n          style: {\n            marginBottom: '10px',\n            borderBottom: '1px solid rgb(150,150,150,0.5)'\n          },\n          onClick: function onClick() {\n            return window.open(\"/order/\".concat(message.id));\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            marginBottom: '2px',\n            fontSize: '18px',\n            fontWeight: '700'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, message.first_name, \" \", message.last_name), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, message.message));\n      });\n      return React.createElement(\"div\", {\n        style: {\n          margin: '0 5% 15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pad-md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(Col, {\n        className: \"margin-bottom-md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, messages)), React.createElement(ConfirmModal, {\n        size: \"sm\",\n        takeAction: function takeAction() {\n          return _this2.deleteUser(st.confirmUser);\n        },\n        isOpen: st.isItemModalOpen,\n        isConfirmClick: st.isConfirmClick,\n        error: st.errorDelete,\n        itemData: original,\n        modalTitle: 'Delete User',\n        modalBody: React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, \"Are you sure you want to delete user \", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, st.confirmUser.username), \" ?\"),\n        onDeleteItem: this.fetchData,\n        toggle: function toggle() {\n          _this2.changeKeyValue(\"isItemModalOpen\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      })), React.createElement(Loader, {\n        message: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, \"Loading...\")),\n        isLoading: st.isLoading || false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return OrderDetails;\n}(Component);\n\nexport default withRouter(OrderDetails);","map":{"version":3,"sources":["/home/cdi_5/agri_thesis_front/src/components/OrderDetails.js"],"names":["React","Component","withRouter","NavLink","Row","Col","Button","ReactTable","API","Session","Helpers","lS","DefaultState","TOAST","OPTIONS","gDp","DATE_FORMAT","SearchBar","ConfirmModal","FaTrashAlt","FaEdit","Loader","qs","require","OrderDetails","urlSearch","parse","props","history","location","search","state","data","prevColumn","columns","toggleLoading","flag","setState","oldState","searchLoading","toggleButton","path","push","componentDidMount","apiRetrieve","id","match","params","getOrder","then","response","err","pop","message","type","that","st","original","selected","messages","map","marginBottom","borderBottom","window","open","fontSize","fontWeight","first_name","last_name","margin","deleteUser","confirmUser","isItemModalOpen","isConfirmClick","errorDelete","username","fetchData","changeKeyValue","isLoading"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter, NavLink } from 'react-router-dom' \nimport { Row, Col, Button } from 'reactstrap'\nimport ReactTable from 'react-table'\n\nimport * as API from '../services/API'\nimport * as Session from '../services/session'\n\nimport { Helpers, lS, DefaultState, TOAST, OPTIONS, gDp, DATE_FORMAT  } from '../helpers/helpers'\n\nimport SearchBar from './SearchBar.js'\nimport ConfirmModal from '../modals/ConfirmModal'\n\nimport {FaTrashAlt, FaEdit} from 'react-icons/fa/'\nimport Loader from './Loader'\n\nconst qs = require('query-string');\n\n// React table ref: https://react-table.js.org/#/story/readme\n\nclass OrderDetails extends Component {\n    urlSearch = qs.parse(this.props.history.location.search)\n    state = {\n        data: [],\n    }\n\n    prevColumn = this.state.columns || {}\n\n    toggleLoading = (flag) => {\n        this.setState(oldState => ({searchLoading: flag}))\n    }\n    toggleButton = (path) => {\n        this.props.history.push(path)\n    }\n\n    componentDidMount = () => {\n        this.apiRetrieve()\n    }\n\n    apiRetrieve = () => {\n        const {id} = this.props.match.params\n        API.getOrder(id)\n        .then((response)=> {this.setState({data: response.data})\n        }, err => {\n            TOAST.pop(message=err.message, type='error')\n        })\n    }\n\n    render() {\n        const that = this\n        const st=this.state;\n        const original = st.selected || {}\n        // st.data = st.data.map(d=> ({ ...d, check: st.checkData.filter(cData=>d.id===cData.id).length > 0 }))\n        // st.columns = [\n        //     ...this.prevColumn,\n        // ]\n        const messages = st.data.map((message)=> \n            <div key={message.id} style={{marginBottom: '10px', borderBottom: '1px solid rgb(150,150,150,0.5)'}} onClick={()=>window.open(`/order/${message.id}`)}>\n                <div style={{marginBottom: '2px', fontSize: '18px', fontWeight: '700'}}>{message.first_name} {message.last_name}</div>\n                <div>{message.message}</div>\n            </div>)\n        return (\n            <div style={{margin: '0 5% 15px'}}> \n                <div className=\"pad-md\">\n                    <Row>\n                        <Col className=\"margin-bottom-md\">\n                            {/* <Row>\n                                <Col md=\"3\" className=\"margin-bottom-sm\"  style={{marginBottom: '10px'}}>\n                                    <SearchBar\n                                        query={st.query}\n                                        placeholder={'Search Order'}\n                                        loading={st.searchLoading}\n                                        didSearch={this.handleSearch}\n                                        onChangeQuery={(e) => {this.setState({query: e.target.value})}}\n                                    />  \n                                </Col>\n                            </Row> */}\n                            {messages}\n                            {/* <Row>\n                                <Col>\n                                    <div className=\"text-left text-lg-right text-md-right\">\n                                        <strong>Total: </strong>\n                                        { st.searchLoading ? '...' : (st.total || 0)} \n                                    </div>\n                                </Col>\n                            </Row>\n                            <Row>\n                                <Col className=\"user\">\n                                    <ReactTable\n                                        {...{\n                                            ...Helpers.reactTableDefault({st, that: that}),\n                                        }}\n                                    />\n                                </Col>\n                            </Row> */}\n                        </Col>\n                    </Row>\n                    <ConfirmModal\n                        size=\"sm\"\n                        takeAction={()=>this.deleteUser(st.confirmUser)}\n                        isOpen={st.isItemModalOpen}\n                        isConfirmClick={st.isConfirmClick}\n                        error={st.errorDelete}\n                        itemData={original}\n                        modalTitle={'Delete User'}\n                        modalBody={ \n                            <p>Are you sure you want to delete user <strong>{st.confirmUser.username}</strong> ?</p>\n                        }\n                        onDeleteItem={this.fetchData}\n                        toggle={\n                            () => {\n                                this.changeKeyValue(\"isItemModalOpen\")\n                            }\n                        }\n                    />\n                </div>\n                <Loader\n                    message={(\n                        <div>\n                            {/* <h4>Fetching reports</h4> */}\n                            <p>Loading...</p>\n                        </div>\n                    )}\n                    isLoading={st.isLoading || false}\n                />\n            </div>\n        ) ;\n    }\n}\n\nexport default withRouter(OrderDetails);"]},"metadata":{},"sourceType":"module"}