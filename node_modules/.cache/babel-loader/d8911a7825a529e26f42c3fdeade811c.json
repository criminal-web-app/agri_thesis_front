{"ast":null,"code":"import _objectSpread from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/cdi_5/agri_thesis_front/src/components/Reports.js\";\nimport React, { Component } from 'react';\nimport { withRouter, NavLink } from 'react-router-dom';\nimport { Row, Col, Button } from 'reactstrap';\nimport { TOAST, DATE, gDp } from '../helpers/helpers';\nimport * as API from '../services/API';\nimport DateRangePicker from 'react-bootstrap-daterangepicker';\nimport moment from 'moment';\nimport Loader from './Loader';\nimport { BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { FaCalendar } from 'react-icons/fa/';\nimport 'bootstrap-daterangepicker/daterangepicker.css';\n\nvar qs = require('query-string');\n\nvar Reports =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Reports, _Component);\n\n  function Reports() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Reports);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Reports)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.urlSearch = qs.parse(_this.props.history.location.search);\n    _this.state = {\n      data: [],\n      report: [],\n      isLoading: true,\n      average_report: [],\n      pageState: {\n        start_date: _this.urlSearch.start_date,\n        end_date: _this.urlSearch.end_date\n      }\n    };\n\n    _this.fetchData = function (id) {\n      var is_average = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (id) {\n        _this.getReport(id);\n      } else if (_this.props.apiRoute === 'getAnnualReport') {\n        _this.getAnnual();\n      } else {\n        _this.getAverage();\n      }\n    };\n\n    _this.getReport = function (id) {\n      var st = _this.state;\n\n      _this.setState({\n        isLoading: true\n      });\n\n      var params = {\n        start_date: st.pageState.start_date || '',\n        end_date: st.pageState.end_date || ''\n      };\n      !st.pageState.start_date && delete params.start_date;\n      !st.pageState.end_date && delete params.end_date;\n      API.getReport(params, id).then(function (response) {\n        _this.setState({\n          report: response.data\n        });\n      }, function (err) {\n        TOAST.pop({\n          message: err.message,\n          type: 'error'\n        });\n      }).finally(function () {\n        return _this.setState({\n          isLoading: false\n        });\n      });\n    };\n\n    _this.getAnnual = function () {\n      var st = _this.state;\n\n      _this.setState({\n        isLoading: true\n      });\n\n      API.getAnnualReport().then(function (response) {\n        _this.setState({\n          annual_report: response.data\n        });\n      }, function (err) {\n        TOAST.pop({\n          message: err.message,\n          type: 'error'\n        });\n      }).finally(function () {\n        return _this.setState({\n          isLoading: false\n        });\n      });\n    };\n\n    _this.getAverage = function () {\n      var st = _this.state;\n\n      _this.setState({\n        isLoading: true\n      });\n\n      var params = {\n        start_date: st.pageState.start_date || '',\n        end_date: st.pageState.end_date || ''\n      };\n      !st.pageState.start_date && delete params.start_date;\n      !st.pageState.end_date && delete params.end_date;\n      API.getAverageReports(params).then(function (response) {\n        var report = [_objectSpread({}, response.data, {\n          fw1: response.data.avg_fw1,\n          bw1: response.data.avg_bw1,\n          fw2: response.data.avg_fw2,\n          bw2: response.data.avg_bw2,\n          fw3: response.data.avg_fw3,\n          bw3: response.data.avg_bw3,\n          fw4: response.data.avg_fw4,\n          bw4: response.data.avg_bw4,\n          fw5: response.data.avg_fw5,\n          bw5: response.data.avg_bw5,\n          fw6: response.data.avg_fw6,\n          bw6: response.data.avg_bw6,\n          fw7: response.data.avg_fw7,\n          bw7: response.data.avg_bw7,\n          fw8: response.data.avg_fw8,\n          bw8: response.data.avg_bw8\n        })];\n\n        _this.setState({\n          report: report\n        });\n      }, function (err) {\n        TOAST.pop({\n          message: err.message,\n          type: 'error'\n        });\n      }).finally(function () {\n        return _this.setState({\n          isLoading: false\n        });\n      });\n    };\n\n    _this.componentDidMount = function () {\n      var id = _this.props.match.params.id;\n\n      _this.setState({\n        isLoading: true\n      });\n\n      API.getReports().then(function (response) {\n        var newData = response.data.filter(function (report, index, self) {\n          return index === self.findIndex(function (t) {\n            return t.activity_id === report.activity_id;\n          });\n        });\n\n        _this.setState({\n          data: newData\n        }); // this.setState({data: response.data})\n\n      }, function (err) {\n        TOAST.pop({\n          message: err.message,\n          type: 'error'\n        });\n      }).finally(function () {\n        _this.setState({\n          isLoading: false\n        });\n\n        _this.fetchData(id);\n      });\n    };\n\n    _this.componentWillReceiveProps = function (newProps) {\n      var id = newProps.match.params.id;\n      console.log(newProps);\n\n      _this.setState({\n        isLoading: true\n      });\n\n      if (newProps.location.pathname === '/reports') {\n        _this.getAverage();\n      } else if (newProps.location.pathname === '/report/annual') {\n        _this.getAnnual();\n      } else {\n        _this.getReport(id);\n      }\n    };\n\n    _this.handleDateRange = function (event, picker) {\n      var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n      var st = _this.state;\n      var id = _this.props.match.params.id;\n\n      _this.setState({\n        pageState: {\n          start_date: picker.startDate.format(DATE.DATE_DASH),\n          end_date: picker.endDate.format(DATE.DATE_DASH)\n        }\n      }, function () {\n        _this.props.history.push(\"?start_date=\".concat(picker.startDate.format(DATE.DATE_DASH), \"&end_date=\").concat(picker.endDate.format(DATE.DATE_DASH)));\n\n        if (id) {\n          _this.fetchData(id, picker.startDate.format(DATE.DATE_DASH));\n        } else {\n          _this.fetchData('', true);\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Reports, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var st = this.state;\n      var pr = this.props;\n      var id = this.props.match.params.id;\n      var startDate = gDp(st.pageState, 'start_date') ? moment(gDp(st.pageState, 'start_date'), DATE.DATE_DASH) : '';\n      var endDate = gDp(st.pageState, 'end_date') ? moment(gDp(st.pageState, 'end_date'), DATE.DATE_DASH) : '';\n      var emptyDateCond = startDate === '' && endDate === '';\n      var is_annual = !!this.props.apiRoute;\n      var reports = [React.createElement(Button, {\n        color: !id && !pr.apiRoute ? \"primary\" : \"secondary\",\n        style: {\n          width: '100%',\n          marginBottom: '5px'\n        },\n        onClick: function onClick() {\n          return pr.history.push(\"/reports\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Average Report\"), React.createElement(Button, {\n        color: !id && pr.apiRoute ? \"primary\" : \"secondary\",\n        style: {\n          width: '100%',\n          marginBottom: '5px'\n        },\n        onClick: function onClick() {\n          return pr.history.push(\"/report/annual\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Annual Report\")];\n      st.data.map(function (report, pos) {\n        return reports.push(React.createElement(Button, {\n          key: report.id,\n          color: id === report.activity_id ? \"primary\" : \"secondary\",\n          style: {\n            width: '100%',\n            marginBottom: '5px'\n          },\n          onClick: function onClick() {\n            return pr.history.push(\"/report/\".concat(report.activity_id));\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, report.name));\n      });\n      var data = st.report.length ? [{\n        name: 1,\n        fw: st.report[0].fw1,\n        bw: st.report[0].bw1\n      }, {\n        name: 2,\n        fw: st.report[0].fw2,\n        bw: st.report[0].bw2\n      }, {\n        name: 3,\n        fw: st.report[0].fw3,\n        bw: st.report[0].bw3\n      }, {\n        name: 4,\n        fw: st.report[0].fw4,\n        bw: st.report[0].bw4\n      }, {\n        name: 5,\n        fw: st.report[0].fw5,\n        bw: st.report[0].bw5\n      }, {\n        name: 6,\n        fw: st.report[0].fw6,\n        bw: st.report[0].bw6\n      }, {\n        name: 7,\n        fw: st.report[0].fw7,\n        bw: st.report[0].bw7\n      }, {\n        name: 8,\n        fw: st.report[0].fw8,\n        bw: st.report[0].bw8\n      }] : '';\n      var params = st.pageState.start_date ? \"?start_date=\".concat(st.pageState.start_date, \"&end_date=\").concat(st.pageState.end_date) : '';\n      console.log(st.annual_report);\n      return React.createElement(\"div\", {\n        style: {\n          margin: '0 5% 15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: \"12\",\n        md: \"3\",\n        style: {\n          overflowY: 'auto',\n          marginBottom: '10px'\n        },\n        className: \"report-buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, reports), React.createElement(Col, {\n        sm: \"12\",\n        md: \"9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: \"12\",\n        md: \"4\",\n        lg: \"3\",\n        style: {\n          padding: '0',\n          marginBottom: '10px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"react-date-range-picker\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(DateRangePicker // opens=\"left\"\n      , Object.assign({}, startDate ? {\n        startDate: startDate\n      } : {}, endDate ? {\n        endDate: endDate\n      } : {}, {\n        ranges: {\n          'This Month': [moment().startOf('month'), moment().endOf('month')],\n          'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]\n        },\n        onApply: this.handleDateRange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"button\",\n        className: \"pad-0 react-date-range-input\",\n        size: \"sm\",\n        color: \"link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"btn-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(FaCalendar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }), \"\\xA0\"), emptyDateCond ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"All\") : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"\".concat(startDate.format(\"MM/DD/YYYY\"), \" - \").concat(endDate.format(\"MM/DD/YYYY\"))))))), React.createElement(Button, {\n        style: {\n          top: '-2px',\n          right: '5px'\n        },\n        size: \"sm\",\n        className: \"form-control-sm-font-size remove\",\n        color: \"link\",\n        onClick: function onClick(e) {\n          _this2.setState({\n            pageState: {\n              start_date: '',\n              end_date: ''\n            }\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \" X \"))))), React.createElement(Col, {\n        align: \"right\",\n        style: {\n          paddingRight: '0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"success\",\n        style: {\n          padding: '0 30px'\n        },\n        onClick: function onClick() {\n          return window.open(\"/report/print/\".concat(id ? id : pr.apiRoute ? 'annual' : 'average').concat(params));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, \"Print Report\"))), is_annual ? React.createElement(ResponsiveContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(BarChart // width={800}\n      // height={300}\n      , {\n        data: st.annual_report,\n        margin: {\n          top: 30,\n          right: 15,\n          left: 5,\n          bottom: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(XAxis, {\n        dataKey: \"Month\",\n        tickSize: true,\n        dy: \"25\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }), React.createElement(YAxis, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }), React.createElement(CartesianGrid, {\n        strokeDasharray: \"3 3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }), React.createElement(Tooltip, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }), React.createElement(Legend, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }), React.createElement(Bar, {\n        dataKey: \"avg_fw\",\n        fill: \"#8884d8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }), React.createElement(Bar, {\n        dataKey: \"avg_bw\",\n        fill: \"#82ca9d\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }))) : React.createElement(ResponsiveContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, React.createElement(BarChart // width={800}\n      // height={300}\n      , {\n        data: data,\n        margin: {\n          top: 30,\n          right: 15,\n          left: 5,\n          bottom: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, React.createElement(XAxis, {\n        dataKey: \"name\",\n        tickSize: true,\n        dy: \"25\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }), React.createElement(YAxis, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }), React.createElement(CartesianGrid, {\n        strokeDasharray: \"3 3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }), React.createElement(Tooltip, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }), React.createElement(Legend, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }), React.createElement(Bar, {\n        dataKey: \"fw\",\n        fill: \"#8884d8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }), React.createElement(Bar, {\n        dataKey: \"bw\",\n        fill: \"#82ca9d\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }))))), React.createElement(Loader, {\n        message: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 315\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 317\n          },\n          __self: this\n        }, \"Loading...\")),\n        isLoading: st.isLoading || false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Reports;\n}(Component);\n\nexport default withRouter(Reports);","map":{"version":3,"sources":["/home/cdi_5/agri_thesis_front/src/components/Reports.js"],"names":["React","Component","withRouter","NavLink","Row","Col","Button","TOAST","DATE","gDp","API","DateRangePicker","moment","Loader","BarChart","Bar","Cell","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","FaCalendar","qs","require","Reports","urlSearch","parse","props","history","location","search","state","data","report","isLoading","average_report","pageState","start_date","end_date","fetchData","id","is_average","getReport","apiRoute","getAnnual","getAverage","st","setState","params","then","response","err","pop","message","type","finally","getAnnualReport","annual_report","getAverageReports","fw1","avg_fw1","bw1","avg_bw1","fw2","avg_fw2","bw2","avg_bw2","fw3","avg_fw3","bw3","avg_bw3","fw4","avg_fw4","bw4","avg_bw4","fw5","avg_fw5","bw5","avg_bw5","fw6","avg_fw6","bw6","avg_bw6","fw7","avg_fw7","bw7","avg_bw7","fw8","avg_fw8","bw8","avg_bw8","componentDidMount","match","getReports","newData","filter","index","self","findIndex","t","activity_id","componentWillReceiveProps","newProps","console","log","pathname","handleDateRange","event","picker","that","startDate","format","DATE_DASH","endDate","push","pr","emptyDateCond","is_annual","reports","width","marginBottom","map","pos","name","length","fw","bw","margin","overflowY","padding","startOf","endOf","subtract","top","right","e","paddingRight","window","open","left","bottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter, NavLink } from 'react-router-dom' \nimport { Row, Col, Button } from 'reactstrap'\nimport { TOAST, DATE, gDp } from '../helpers/helpers'\n\nimport * as API from '../services/API'\nimport DateRangePicker from 'react-bootstrap-daterangepicker'\nimport moment from 'moment';\nimport Loader from './Loader'\n\nimport {\n    BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer\n} from 'recharts';\n\nimport {FaCalendar} from 'react-icons/fa/'\nimport 'bootstrap-daterangepicker/daterangepicker.css';\n\nconst qs = require('query-string');\nclass Reports extends Component {\n    urlSearch = qs.parse(this.props.history.location.search)\n    state = {\n        data:[],\n        report:[],\n        isLoading: true,\n        average_report: [],\n        pageState: {\n            start_date: this.urlSearch.start_date,\n            end_date: this.urlSearch.end_date\n        },\n    }\n\n    fetchData = (id,is_average=false) => {\n        if(id){\n            this.getReport(id)\n        } else if(this.props.apiRoute==='getAnnualReport'){\n            this.getAnnual()\n        } else {\n            this.getAverage()\n        }\n    }\n\n    getReport = (id) => {\n        const st = this.state\n        this.setState({isLoading: true})\n        const params = {\n            start_date: st.pageState.start_date || '',\n            end_date: st.pageState.end_date || ''\n        }\n        !st.pageState.start_date && delete params.start_date\n        !st.pageState.end_date && delete params.end_date\n        API.getReport(params,id)\n        .then((response)=>{\n            this.setState({report: response.data})\n        }, err => {\n            TOAST.pop({message: err.message, type: 'error'})\n        }).finally(()=> \n            this.setState({isLoading: false})\n        )\n    }\n\n    getAnnual = () => {\n        const st = this.state\n        this.setState({isLoading: true})\n        API.getAnnualReport()\n        .then((response)=>{\n            this.setState({annual_report: response.data})\n        }, err => {\n            TOAST.pop({message: err.message, type: 'error'})\n        }).finally(()=> \n            this.setState({isLoading: false})\n        )\n    }\n\n    getAverage = () => {\n        const st = this.state\n        this.setState({isLoading: true})\n        const params = {\n            start_date: st.pageState.start_date || '',\n            end_date: st.pageState.end_date || ''\n        }\n        !st.pageState.start_date && delete params.start_date\n        !st.pageState.end_date && delete params.end_date\n        API.getAverageReports(params)\n        .then((response)=>{\n            const report = [{...response.data,\n                fw1: response.data.avg_fw1, bw1: response.data.avg_bw1,\n                fw2: response.data.avg_fw2, bw2: response.data.avg_bw2,\n                fw3: response.data.avg_fw3, bw3: response.data.avg_bw3,\n                fw4: response.data.avg_fw4, bw4: response.data.avg_bw4,\n                fw5: response.data.avg_fw5, bw5: response.data.avg_bw5,\n                fw6: response.data.avg_fw6, bw6: response.data.avg_bw6,\n                fw7: response.data.avg_fw7, bw7: response.data.avg_bw7,\n                fw8: response.data.avg_fw8, bw8: response.data.avg_bw8,\n            }]\n            this.setState({report: report})\n        }, err => {\n            TOAST.pop({message: err.message, type: 'error'})\n        }).finally(()=> \n            this.setState({isLoading: false})\n        )\n    }\n\n    componentDidMount = () => {\n        const {id} = this.props.match.params\n        this.setState({isLoading: true})\n        API.getReports()\n        .then((response)=>{\n            const newData = response.data.filter((report,index,self)=>\n                index === self.findIndex((t) => (\n                t.activity_id === report.activity_id\n              ))\n            )\n            this.setState({data: newData})\n            // this.setState({data: response.data})\n        }, err => {\n            TOAST.pop({message: err.message, type: 'error'})\n        }).finally(()=> {\n            this.setState({isLoading: false})\n            this.fetchData(id)\n        })\n    }\n\n    componentWillReceiveProps = (newProps) => {\n        const {id} = newProps.match.params\n        console.log(newProps)\n        this.setState({isLoading: true})\n        if(newProps.location.pathname==='/reports') {\n            this.getAverage()\n        } else if(newProps.location.pathname==='/report/annual') {\n            this.getAnnual()\n        } else{\n            this.getReport(id)\n        }\n    }\n\n    handleDateRange = (event, picker) => {\n        const that = this\n        const st = this.state\n        const {id} = this.props.match.params\n        this.setState({\n            pageState: {\n                start_date: picker.startDate.format(DATE.DATE_DASH),\n                end_date: picker.endDate.format(DATE.DATE_DASH)\n            }\n            },()=> {\n                this.props.history.push(`?start_date=${picker.startDate.format(DATE.DATE_DASH)}&end_date=${picker.endDate.format(DATE.DATE_DASH)}`)\n                if(id){\n                    this.fetchData(id, picker.startDate.format(DATE.DATE_DASH))\n                } else {\n                    this.fetchData('', true)\n                }\n            })\n    }\n\n    render() {\n        const st= this.state\n        const pr = this.props\n        const {id} = this.props.match.params\n        const startDate = gDp(st.pageState,'start_date') ? moment(gDp(st.pageState,'start_date'),DATE.DATE_DASH) : ''\n        const endDate = gDp(st.pageState,'end_date') ? moment(gDp(st.pageState,'end_date'),DATE.DATE_DASH) : ''\n        const emptyDateCond = startDate==='' && endDate ===''\n        const is_annual = !!this.props.apiRoute\n        const reports = [\n            <Button color={!id && !pr.apiRoute ? \"primary\" : \"secondary\"} style={{width: '100%', marginBottom: '5px'}}\n                onClick={()=>pr.history.push(`/reports`)}>\n                Average Report\n            </Button>,\n            <Button color={!id && pr.apiRoute ? \"primary\" : \"secondary\"} style={{width: '100%', marginBottom: '5px'}}\n                onClick={()=>pr.history.push(`/report/annual`)}>\n                Annual Report\n            </Button>\n        ]\n        st.data.map((report, pos)=> \n            reports.push(\n            <Button key={report.id} color={id===report.activity_id ? \"primary\" : \"secondary\"} style={{width: '100%', marginBottom: '5px'}}\n                onClick={()=>pr.history.push(`/report/${report.activity_id}`)}>\n                {report.name}\n            </Button>\n        ))\n        const data = st.report.length ? [\n            {\n                name: 1, fw: st.report[0].fw1, bw: st.report[0].bw1\n            },\n            {\n                name: 2, fw: st.report[0].fw2, bw: st.report[0].bw2\n            },\n            {\n                name: 3, fw: st.report[0].fw3, bw: st.report[0].bw3\n            },\n            {\n                name: 4, fw: st.report[0].fw4, bw: st.report[0].bw4\n            },\n            {\n                name: 5, fw: st.report[0].fw5, bw: st.report[0].bw5\n            },\n            {\n                name: 6, fw: st.report[0].fw6, bw: st.report[0].bw6\n            },\n            {\n                name: 7, fw: st.report[0].fw7, bw: st.report[0].bw7\n            },\n            {\n                name: 8, fw: st.report[0].fw8, bw: st.report[0].bw8\n            },\n        ] : ''\n\n        const params = st.pageState.start_date ? `?start_date=${st.pageState.start_date}&end_date=${st.pageState.end_date}` : ''\n        console.log(st.annual_report)\n        return (\n            <div style={{margin: '0 5% 15px'}}> \n                <Row>\n                    <Col sm=\"12\" md=\"3\" style={{overflowY:'auto', marginBottom: '10px'}} className=\"report-buttons\">\n                        {reports}\n                    </Col>\n                    <Col sm=\"12\" md=\"9\">\n                        <Row>\n                            <Col sm=\"12\" md=\"4\" lg=\"3\" style={{padding: '0', marginBottom: '10px'}}>\n                                <div>\n                                    <div className=\"react-date-range-picker\">\n                                        <DateRangePicker\n                                            // opens=\"left\"\n                                            {...(startDate) ? {startDate} : {}}\n                                            {...(endDate) ? {endDate} : {}}\n                                            ranges={{\n                                                'This Month': [moment().startOf('month'), moment().endOf('month')],\n                                                'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]\n                                            }}\n                                            onApply={this.handleDateRange}\n                                            >\n                                            <div>\n                                                <Button type=\"button\" className=\"pad-0 react-date-range-input\" size='sm' color=\"link\">\n                                                    <i className=\"btn-icon\">\n                                                        <FaCalendar/>&nbsp;\n                                                    </i>\n                                                    {\n                                                        emptyDateCond ? (\n                                                            <span>All</span>\n                                                        ) :\n                                                        (\n                                                            <span>\n                                                                <span>{`${startDate.format(\"MM/DD/YYYY\")} - ${endDate.format(\"MM/DD/YYYY\")}`}</span>\n                                                            </span>\n\n                                                        )\n                                                    }\n                                                </Button>\n                                            </div>\n                                        </DateRangePicker>\n                                        <Button style={{top:'-2px', right:'5px'}} size=\"sm\" className=\"form-control-sm-font-size remove\" color=\"link\" onClick={(e)=>{\n                                            this.setState({\n                                                pageState: {\n                                                    start_date: '',end_date: ''\n                                                }\n                                            })\n                                            }\n                                        }\n                                        >\n                                            <strong> X </strong>\n                                        </Button>\n                                    </div>\n                                </div>\n                            </Col>\n                            <Col align=\"right\" style={{paddingRight: '0'}}>\n                                <Button color=\"success\" style={{padding: '0 30px'}} onClick={()=>window.open(`/report/print/${id? id: pr.apiRoute? 'annual': 'average'}${params}`)}>\n                                    Print Report\n                                </Button>\n                            </Col>\n                        </Row>\n                        {is_annual ? \n                        <ResponsiveContainer>\n                            <BarChart\n                                // width={800}\n                                // height={300}\n                                data={st.annual_report}\n                                margin={{\n                                top: 30, right: 15, left: 5, bottom: 15,\n                                }}\n                            >\n                                <XAxis dataKey=\"Month\" tickSize\n                                    dy='25'/>\n                                <YAxis />\n                                <CartesianGrid strokeDasharray=\"3 3\" />\n                                <Tooltip />\n                                <Legend />\n                                <Bar dataKey=\"avg_fw\" fill=\"#8884d8\"></Bar>\n                                <Bar dataKey=\"avg_bw\" fill=\"#82ca9d\"/>\n                            </BarChart>\n                        </ResponsiveContainer>:\n\n                        <ResponsiveContainer>\n                            <BarChart\n                                // width={800}\n                                // height={300}\n                                data={data}\n                                margin={{\n                                top: 30, right: 15, left: 5, bottom: 15,\n                                }}\n                            >\n                                <XAxis dataKey=\"name\" tickSize\n                                    dy='25'/>\n                                <YAxis />\n                                <CartesianGrid strokeDasharray=\"3 3\" />\n                                <Tooltip />\n                                <Legend />\n                                <Bar dataKey=\"fw\" fill=\"#8884d8\"></Bar>\n                                <Bar dataKey=\"bw\" fill=\"#82ca9d\"/>\n                            </BarChart>\n                        </ResponsiveContainer>\n                        }\n                    </Col>\n                </Row>\n                \n                <Loader\n                    message={(\n                        <div>\n                            {/* <h4>Fetching reports</h4> */}\n                            <p>Loading...</p>\n                        </div>\n                    )}\n                    isLoading={st.isLoading || false}\n                />\n            </div>\n        ) ;\n    }\n}\n\nexport default withRouter(Reports);"]},"metadata":{},"sourceType":"module"}