{"ast":null,"code":"import _objectSpread from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/cdi_5/agri_thesis_front/src/components/PrintReport.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport * as API from '../services/API';\nimport moment from 'moment';\nimport { gDp } from '../helpers/helpers';\nimport { BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\n\nvar qs = require('query-string');\n\nvar PrintReport =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PrintReport, _Component);\n\n  function PrintReport() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PrintReport);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PrintReport)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.urlSearch = qs.parse(_this.props.history.location.search);\n    _this.state = {\n      report: [],\n      pageState: {\n        start_date: _this.urlSearch.start_date,\n        end_date: _this.urlSearch.end_date\n      }\n    };\n\n    _this.apiRetrieve = function () {\n      var st = _this.state;\n      var id = _this.props.match.params.id;\n      var params = {\n        start_date: st.pageState.start_date || '',\n        end_date: st.pageState.end_date || ''\n      };\n      !st.pageState.start_date && delete params.start_date;\n      !st.pageState.end_date && delete params.end_date;\n      console.log('Hello');\n      API.getReport(params, id).then(function (response) {\n        _this.setState({\n          report: response.data\n        }, function () {\n          setTimeout(function () {\n            window.print();\n            setTimeout(window.close, 0);\n          }, 500);\n        });\n      }, function (err) {}).finally(function () {\n        return _this.setState({\n          isLoading: false\n        });\n      });\n    };\n\n    _this.apiAverage = function () {\n      var st = _this.state;\n      var id = _this.props.match.params.id;\n      var params = {\n        start_date: st.pageState.start_date || '',\n        end_date: st.pageState.end_date || ''\n      };\n      !st.pageState.start_date && delete params.start_date;\n      !st.pageState.end_date && delete params.end_date;\n      API.getReport(params, id).then(function (response) {\n        var report = [_objectSpread({}, response.data, {\n          fw1: response.data.avg_fw1,\n          bw1: response.data.avg_bw1,\n          fw2: response.data.avg_fw2,\n          bw2: response.data.avg_bw2,\n          fw3: response.data.avg_fw3,\n          bw3: response.data.avg_bw3,\n          fw4: response.data.avg_fw4,\n          bw4: response.data.avg_bw4,\n          fw5: response.data.avg_fw5,\n          bw5: response.data.avg_bw5,\n          fw6: response.data.avg_fw6,\n          bw6: response.data.avg_bw6,\n          fw7: response.data.avg_fw7,\n          bw7: response.data.avg_bw7,\n          fw8: response.data.avg_fw8,\n          bw8: response.data.avg_bw8\n        })];\n\n        _this.setState({\n          report: report\n        }, function () {\n          setTimeout(function () {\n            window.print();\n            setTimeout(window.close, 0);\n          }, 500);\n        });\n      }, function (err) {}).finally(function () {\n        return _this.setState({\n          isLoading: false\n        });\n      });\n    };\n\n    _this.apiAnnual = function () {\n      var st = _this.state;\n\n      _this.setState({\n        isLoading: true\n      });\n\n      console.log('isAnnual');\n      API.getAnnualReport().then(function (response) {\n        _this.setState({\n          annual_report: response.data\n        });\n      }, function (err) {// TOAST.pop({message: err.message, type: 'error'})\n      }).finally(function () {\n        return _this.setState({\n          isLoading: false\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(PrintReport, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var pr = this.props;\n      var id = this.props.match.params.id;\n\n      if (id) {\n        this.apiRetrieve();\n      } else if (pr.apiRoute) {\n        this.apiAnnual();\n      } else {\n        this.apiAverage();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var st = this.state;\n      var data = st.report.length ? [{\n        name: 1,\n        fw: st.report[0].fw1,\n        bw: st.report[0].bw1\n      }, {\n        name: 2,\n        fw: st.report[0].fw2,\n        bw: st.report[0].bw2\n      }, {\n        name: 3,\n        fw: st.report[0].fw3,\n        bw: st.report[0].bw3\n      }, {\n        name: 4,\n        fw: st.report[0].fw4,\n        bw: st.report[0].bw4\n      }, {\n        name: 5,\n        fw: st.report[0].fw5,\n        bw: st.report[0].bw5\n      }, {\n        name: 6,\n        fw: st.report[0].fw6,\n        bw: st.report[0].bw6\n      }, {\n        name: 7,\n        fw: st.report[0].fw7,\n        bw: st.report[0].bw7\n      }, {\n        name: 8,\n        fw: st.report[0].fw8,\n        bw: st.report[0].bw8\n      }] : '';\n      var is_annual = this.props.location.pathname === '/report/print/annual';\n      console.log(st.report, this.props, st);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        style: {\n          fontSize: '24px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          fontSize: '36px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, st.report.length ? st.report[0].name : ''), \"\\xA0\", st.pageState.start_date ? \"(\".concat(moment(st.pageState.start_date).format('MMMM DD YYYY')) : '', \" \", st.pageState.end_date ? \"- \".concat(moment(st.pageState.end_date).format('MMMM DD YYYY'), \")\") : '')), is_annual ? React.createElement(ResponsiveContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(BarChart // width={800}\n      // height={300}\n      , {\n        data: st.annual_report,\n        margin: {\n          top: 30,\n          right: 15,\n          left: 5,\n          bottom: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(XAxis, {\n        dataKey: \"Month\",\n        tickSize: true,\n        dy: \"25\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(YAxis, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(CartesianGrid, {\n        strokeDasharray: \"3 3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), React.createElement(Tooltip, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(Legend, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(Bar, {\n        dataKey: \"avg_fw\",\n        fill: \"#8884d8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), React.createElement(Bar, {\n        dataKey: \"avg_bw\",\n        fill: \"#82ca9d\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }))) : React.createElement(ResponsiveContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(BarChart // width={800}\n      // height={300}\n      , {\n        data: data,\n        margin: {\n          top: 30,\n          right: 15,\n          left: 5,\n          bottom: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(XAxis, {\n        dataKey: \"name\",\n        tickSize: true,\n        dy: \"25\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), React.createElement(YAxis, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }), React.createElement(CartesianGrid, {\n        strokeDasharray: \"3 3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }), React.createElement(Legend, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }), React.createElement(Bar, {\n        dataKey: \"fw\",\n        fill: \"#8884d8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }), React.createElement(Bar, {\n        dataKey: \"bw\",\n        fill: \"#82ca9d\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return PrintReport;\n}(Component);\n\nexport default withRouter(PrintReport);","map":{"version":3,"sources":["/home/cdi_5/agri_thesis_front/src/components/PrintReport.js"],"names":["React","Component","withRouter","API","moment","gDp","BarChart","Bar","Cell","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","qs","require","PrintReport","urlSearch","parse","props","history","location","search","state","report","pageState","start_date","end_date","apiRetrieve","st","id","match","params","console","log","getReport","then","response","setState","data","setTimeout","window","print","close","err","finally","isLoading","apiAverage","fw1","avg_fw1","bw1","avg_bw1","fw2","avg_fw2","bw2","avg_bw2","fw3","avg_fw3","bw3","avg_bw3","fw4","avg_fw4","bw4","avg_bw4","fw5","avg_fw5","bw5","avg_bw5","fw6","avg_fw6","bw6","avg_bw6","fw7","avg_fw7","bw7","avg_bw7","fw8","avg_fw8","bw8","avg_bw8","apiAnnual","getAnnualReport","annual_report","pr","apiRoute","length","name","fw","bw","is_annual","pathname","fontSize","format","top","right","left","bottom"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAO,KAAKC,GAAZ,MAAqB,iBAArB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,GAAT,QAAoB,oBAApB;AAEA,SACIC,QADJ,EACcC,GADd,EACmBC,IADnB,EACyBC,KADzB,EACgCC,KADhC,EACuCC,aADvC,EACsDC,OADtD,EAC+DC,MAD/D,EACuEC,mBADvE,QAEO,UAFP;;AAIA,IAAMC,EAAE,GAAGC,OAAO,CAAC,cAAD,CAAlB;;IAEMC,W;;;;;;;;;;;;;;;;;UACFC,S,GAAYH,EAAE,CAACI,KAAH,CAAS,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,QAAnB,CAA4BC,MAArC,C;UACZC,K,GAAM;AACFC,MAAAA,MAAM,EAAE,EADN;AAEFC,MAAAA,SAAS,EAAE;AACPC,QAAAA,UAAU,EAAE,MAAKT,SAAL,CAAeS,UADpB;AAEPC,QAAAA,QAAQ,EAAE,MAAKV,SAAL,CAAeU;AAFlB;AAFT,K;;UAQNC,W,GAAc,YAAM;AAChB,UAAMC,EAAE,GAAG,MAAKN,KAAhB;AADgB,UAETO,EAFS,GAEH,MAAKX,KAAL,CAAWY,KAAX,CAAiBC,MAFd,CAETF,EAFS;AAGhB,UAAME,MAAM,GAAG;AACXN,QAAAA,UAAU,EAAEG,EAAE,CAACJ,SAAH,CAAaC,UAAb,IAA2B,EAD5B;AAEXC,QAAAA,QAAQ,EAAEE,EAAE,CAACJ,SAAH,CAAaE,QAAb,IAAyB;AAFxB,OAAf;AAIA,OAACE,EAAE,CAACJ,SAAH,CAAaC,UAAd,IAA4B,OAAOM,MAAM,CAACN,UAA1C;AACA,OAACG,EAAE,CAACJ,SAAH,CAAaE,QAAd,IAA0B,OAAOK,MAAM,CAACL,QAAxC;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAhC,MAAAA,GAAG,CAACiC,SAAJ,CAAcH,MAAd,EAAqBF,EAArB,EACCM,IADD,CACM,UAACC,QAAD,EAAY;AACd,cAAKC,QAAL,CAAc;AAACd,UAAAA,MAAM,EAAEa,QAAQ,CAACE;AAAlB,SAAd,EAAsC,YAAI;AACtCC,UAAAA,UAAU,CAAC,YAAI;AACXC,YAAAA,MAAM,CAACC,KAAP;AACAF,YAAAA,UAAU,CAACC,MAAM,CAACE,KAAR,EAAe,CAAf,CAAV;AACH,WAHS,EAGP,GAHO,CAAV;AAIH,SALD;AAMH,OARD,EAQG,UAAAC,GAAG,EAAI,CAET,CAVD,EAUGC,OAVH,CAUW;AAAA,eACP,MAAKP,QAAL,CAAc;AAACQ,UAAAA,SAAS,EAAE;AAAZ,SAAd,CADO;AAAA,OAVX;AAaH,K;;UAEDC,U,GAAa,YAAM;AACf,UAAMlB,EAAE,GAAG,MAAKN,KAAhB;AADe,UAERO,EAFQ,GAEF,MAAKX,KAAL,CAAWY,KAAX,CAAiBC,MAFf,CAERF,EAFQ;AAGf,UAAME,MAAM,GAAG;AACXN,QAAAA,UAAU,EAAEG,EAAE,CAACJ,SAAH,CAAaC,UAAb,IAA2B,EAD5B;AAEXC,QAAAA,QAAQ,EAAEE,EAAE,CAACJ,SAAH,CAAaE,QAAb,IAAyB;AAFxB,OAAf;AAIA,OAACE,EAAE,CAACJ,SAAH,CAAaC,UAAd,IAA4B,OAAOM,MAAM,CAACN,UAA1C;AACA,OAACG,EAAE,CAACJ,SAAH,CAAaE,QAAd,IAA0B,OAAOK,MAAM,CAACL,QAAxC;AACAzB,MAAAA,GAAG,CAACiC,SAAJ,CAAcH,MAAd,EAAqBF,EAArB,EACCM,IADD,CACM,UAACC,QAAD,EAAY;AACd,YAAMb,MAAM,GAAG,mBAAKa,QAAQ,CAACE,IAAd;AACXS,UAAAA,GAAG,EAAEX,QAAQ,CAACE,IAAT,CAAcU,OADR;AACiBC,UAAAA,GAAG,EAAEb,QAAQ,CAACE,IAAT,CAAcY,OADpC;AAEXC,UAAAA,GAAG,EAAEf,QAAQ,CAACE,IAAT,CAAcc,OAFR;AAEiBC,UAAAA,GAAG,EAAEjB,QAAQ,CAACE,IAAT,CAAcgB,OAFpC;AAGXC,UAAAA,GAAG,EAAEnB,QAAQ,CAACE,IAAT,CAAckB,OAHR;AAGiBC,UAAAA,GAAG,EAAErB,QAAQ,CAACE,IAAT,CAAcoB,OAHpC;AAIXC,UAAAA,GAAG,EAAEvB,QAAQ,CAACE,IAAT,CAAcsB,OAJR;AAIiBC,UAAAA,GAAG,EAAEzB,QAAQ,CAACE,IAAT,CAAcwB,OAJpC;AAKXC,UAAAA,GAAG,EAAE3B,QAAQ,CAACE,IAAT,CAAc0B,OALR;AAKiBC,UAAAA,GAAG,EAAE7B,QAAQ,CAACE,IAAT,CAAc4B,OALpC;AAMXC,UAAAA,GAAG,EAAE/B,QAAQ,CAACE,IAAT,CAAc8B,OANR;AAMiBC,UAAAA,GAAG,EAAEjC,QAAQ,CAACE,IAAT,CAAcgC,OANpC;AAOXC,UAAAA,GAAG,EAAEnC,QAAQ,CAACE,IAAT,CAAckC,OAPR;AAOiBC,UAAAA,GAAG,EAAErC,QAAQ,CAACE,IAAT,CAAcoC,OAPpC;AAQXC,UAAAA,GAAG,EAAEvC,QAAQ,CAACE,IAAT,CAAcsC,OARR;AAQiBC,UAAAA,GAAG,EAAEzC,QAAQ,CAACE,IAAT,CAAcwC;AARpC,WAAf;;AAUA,cAAKzC,QAAL,CAAc;AAACd,UAAAA,MAAM,EAAEA;AAAT,SAAd,EAA+B,YAAI;AAC/BgB,UAAAA,UAAU,CAAC,YAAI;AACXC,YAAAA,MAAM,CAACC,KAAP;AACAF,YAAAA,UAAU,CAACC,MAAM,CAACE,KAAR,EAAe,CAAf,CAAV;AACH,WAHS,EAGP,GAHO,CAAV;AAIH,SALD;AAMH,OAlBD,EAkBG,UAAAC,GAAG,EAAI,CAET,CApBD,EAoBGC,OApBH,CAoBW;AAAA,eACP,MAAKP,QAAL,CAAc;AAACQ,UAAAA,SAAS,EAAE;AAAZ,SAAd,CADO;AAAA,OApBX;AAuBH,K;;UAEDkC,S,GAAY,YAAM;AACd,UAAMnD,EAAE,GAAG,MAAKN,KAAhB;;AACA,YAAKe,QAAL,CAAc;AAACQ,QAAAA,SAAS,EAAE;AAAZ,OAAd;;AACAb,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAhC,MAAAA,GAAG,CAAC+E,eAAJ,GACC7C,IADD,CACM,UAACC,QAAD,EAAY;AACd,cAAKC,QAAL,CAAc;AAAC4C,UAAAA,aAAa,EAAE7C,QAAQ,CAACE;AAAzB,SAAd;AACH,OAHD,EAGG,UAAAK,GAAG,EAAI,CACN;AACH,OALD,EAKGC,OALH,CAKW;AAAA,eACP,MAAKP,QAAL,CAAc;AAACQ,UAAAA,SAAS,EAAE;AAAZ,SAAd,CADO;AAAA,OALX;AAQH,K;;;;;;;wCAEkB;AACf,UAAMqC,EAAE,GAAG,KAAKhE,KAAhB;AADe,UAERW,EAFQ,GAEF,KAAKX,KAAL,CAAWY,KAAX,CAAiBC,MAFf,CAERF,EAFQ;;AAGf,UAAGA,EAAH,EAAM;AACF,aAAKF,WAAL;AACH,OAFD,MAEO,IAAGuD,EAAE,CAACC,QAAN,EAAe;AAClB,aAAKJ,SAAL;AACH,OAFM,MAEA;AACH,aAAKjC,UAAL;AACH;AACJ;;;6BAEQ;AACL,UAAMlB,EAAE,GAAG,KAAKN,KAAhB;AACA,UAAMgB,IAAI,GAAGV,EAAE,CAACL,MAAH,CAAU6D,MAAV,GAAmB,CAC5B;AACIC,QAAAA,IAAI,EAAE,CADV;AACaC,QAAAA,EAAE,EAAE1D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAawB,GAD9B;AACmCwC,QAAAA,EAAE,EAAE3D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAa0B;AADpD,OAD4B,EAI5B;AACIoC,QAAAA,IAAI,EAAE,CADV;AACaC,QAAAA,EAAE,EAAE1D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAa4B,GAD9B;AACmCoC,QAAAA,EAAE,EAAE3D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAa8B;AADpD,OAJ4B,EAO5B;AACIgC,QAAAA,IAAI,EAAE,CADV;AACaC,QAAAA,EAAE,EAAE1D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAagC,GAD9B;AACmCgC,QAAAA,EAAE,EAAE3D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAakC;AADpD,OAP4B,EAU5B;AACI4B,QAAAA,IAAI,EAAE,CADV;AACaC,QAAAA,EAAE,EAAE1D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAaoC,GAD9B;AACmC4B,QAAAA,EAAE,EAAE3D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAasC;AADpD,OAV4B,EAa5B;AACIwB,QAAAA,IAAI,EAAE,CADV;AACaC,QAAAA,EAAE,EAAE1D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAawC,GAD9B;AACmCwB,QAAAA,EAAE,EAAE3D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAa0C;AADpD,OAb4B,EAgB5B;AACIoB,QAAAA,IAAI,EAAE,CADV;AACaC,QAAAA,EAAE,EAAE1D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAa4C,GAD9B;AACmCoB,QAAAA,EAAE,EAAE3D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAa8C;AADpD,OAhB4B,EAmB5B;AACIgB,QAAAA,IAAI,EAAE,CADV;AACaC,QAAAA,EAAE,EAAE1D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAagD,GAD9B;AACmCgB,QAAAA,EAAE,EAAE3D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAakD;AADpD,OAnB4B,EAsB5B;AACIY,QAAAA,IAAI,EAAE,CADV;AACaC,QAAAA,EAAE,EAAE1D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAaoD,GAD9B;AACmCY,QAAAA,EAAE,EAAE3D,EAAE,CAACL,MAAH,CAAU,CAAV,EAAasD;AADpD,OAtB4B,CAAnB,GAyBT,EAzBJ;AA0BA,UAAMW,SAAS,GAAG,KAAKtE,KAAL,CAAWE,QAAX,CAAoBqE,QAApB,KAA+B,sBAAjD;AACAzD,MAAAA,OAAO,CAACC,GAAR,CAAYL,EAAE,CAACL,MAAf,EAAuB,KAAKL,KAA5B,EAAmCU,EAAnC;AACA,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,KAAK,EAAE,EAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,KAAK,EAAE;AAAC8D,UAAAA,QAAQ,EAAE;AAAX,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmC;AAAM,QAAA,KAAK,EAAE;AAACA,UAAAA,QAAQ,EAAE;AAAX,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAkC9D,EAAE,CAACL,MAAH,CAAU6D,MAAV,GAAmBxD,EAAE,CAACL,MAAH,CAAU,CAAV,EAAa8D,IAAhC,GAAuC,EAAzE,CAAnC,UAA6HzD,EAAE,CAACJ,SAAH,CAAaC,UAAb,cAA8BvB,MAAM,CAAC0B,EAAE,CAACJ,SAAH,CAAaC,UAAd,CAAN,CAAgCkE,MAAhC,CAAuC,cAAvC,CAA9B,IAAyF,EAAtN,OAA2N/D,EAAE,CAACJ,SAAH,CAAaE,QAAb,eAA6BxB,MAAM,CAAC0B,EAAE,CAACJ,SAAH,CAAaE,QAAd,CAAN,CAA8BiE,MAA9B,CAAqC,cAArC,CAA7B,SAAuF,EAAlT,CADJ,CADJ,EAIKH,SAAS,GACN,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD,CACI;AACA;AAFJ;AAGI,QAAA,IAAI,EAAE5D,EAAE,CAACqD,aAHb;AAII,QAAA,MAAM,EAAE;AACRW,UAAAA,GAAG,EAAE,EADG;AACCC,UAAAA,KAAK,EAAE,EADR;AACYC,UAAAA,IAAI,EAAE,CADlB;AACqBC,UAAAA,MAAM,EAAE;AAD7B,SAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAQI,oBAAC,KAAD;AAAO,QAAA,OAAO,EAAC,OAAf;AAAuB,QAAA,QAAQ,MAA/B;AACI,QAAA,EAAE,EAAC,IADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARJ,EAUI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAVJ,EAWI,oBAAC,aAAD;AAAe,QAAA,eAAe,EAAC,KAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAXJ,EAYI,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZJ,EAaI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbJ,EAcI,oBAAC,GAAD;AAAK,QAAA,OAAO,EAAC,QAAb;AAAsB,QAAA,IAAI,EAAC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdJ,EAeI,oBAAC,GAAD;AAAK,QAAA,OAAO,EAAC,QAAb;AAAsB,QAAA,IAAI,EAAC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAfJ,CADJ,CADM,GAoBN,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD,CACI;AACA;AAFJ;AAGI,QAAA,IAAI,EAAEzD,IAHV;AAII,QAAA,MAAM,EAAE;AACRsD,UAAAA,GAAG,EAAE,EADG;AACCC,UAAAA,KAAK,EAAE,EADR;AACYC,UAAAA,IAAI,EAAE,CADlB;AACqBC,UAAAA,MAAM,EAAE;AAD7B,SAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAQI,oBAAC,KAAD;AAAO,QAAA,OAAO,EAAC,MAAf;AAAsB,QAAA,QAAQ,MAA9B;AACI,QAAA,EAAE,EAAC,IADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARJ,EAUI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAVJ,EAWI,oBAAC,aAAD;AAAe,QAAA,eAAe,EAAC,KAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAXJ,EAaI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbJ,EAcI,oBAAC,GAAD;AAAK,QAAA,OAAO,EAAC,IAAb;AAAkB,QAAA,IAAI,EAAC,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdJ,EAeI,oBAAC,GAAD;AAAK,QAAA,OAAO,EAAC,IAAb;AAAkB,QAAA,IAAI,EAAC,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAfJ,CADJ,CAxBR,CADJ;AA+CH;;;;EA5KqBhG,S;;AA+K1B,eAAeC,UAAU,CAACe,WAAD,CAAzB","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom' \nimport * as API from '../services/API'\nimport moment from 'moment';\nimport { gDp } from '../helpers/helpers'\n\nimport {\n    BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer\n} from 'recharts';\n\nconst qs = require('query-string');\n\nclass PrintReport extends Component {\n    urlSearch = qs.parse(this.props.history.location.search)\n    state={\n        report: [],\n        pageState: {\n            start_date: this.urlSearch.start_date,\n            end_date: this.urlSearch.end_date\n        },\n    }\n\n    apiRetrieve = () => {\n        const st = this.state\n        const {id} = this.props.match.params\n        const params = {\n            start_date: st.pageState.start_date || '',\n            end_date: st.pageState.end_date || ''\n        }\n        !st.pageState.start_date && delete params.start_date\n        !st.pageState.end_date && delete params.end_date\n        console.log('Hello')\n        API.getReport(params,id)\n        .then((response)=>{\n            this.setState({report: response.data},()=>{\n                setTimeout(()=>{\n                    window.print();\n                    setTimeout(window.close, 0);\n                }, 500)\n            })\n        }, err => {\n            \n        }).finally(()=> \n            this.setState({isLoading: false})\n        )\n    }\n\n    apiAverage = () => {\n        const st = this.state\n        const {id} = this.props.match.params\n        const params = {\n            start_date: st.pageState.start_date || '',\n            end_date: st.pageState.end_date || ''\n        }\n        !st.pageState.start_date && delete params.start_date\n        !st.pageState.end_date && delete params.end_date\n        API.getReport(params,id)\n        .then((response)=>{\n            const report = [{...response.data,\n                fw1: response.data.avg_fw1, bw1: response.data.avg_bw1,\n                fw2: response.data.avg_fw2, bw2: response.data.avg_bw2,\n                fw3: response.data.avg_fw3, bw3: response.data.avg_bw3,\n                fw4: response.data.avg_fw4, bw4: response.data.avg_bw4,\n                fw5: response.data.avg_fw5, bw5: response.data.avg_bw5,\n                fw6: response.data.avg_fw6, bw6: response.data.avg_bw6,\n                fw7: response.data.avg_fw7, bw7: response.data.avg_bw7,\n                fw8: response.data.avg_fw8, bw8: response.data.avg_bw8,\n            }]\n            this.setState({report: report},()=>{\n                setTimeout(()=>{\n                    window.print();\n                    setTimeout(window.close, 0);\n                }, 500)\n            })\n        }, err => {\n            \n        }).finally(()=> \n            this.setState({isLoading: false})\n        )\n    }\n\n    apiAnnual = () => {\n        const st = this.state\n        this.setState({isLoading: true})\n        console.log('isAnnual')\n        API.getAnnualReport()\n        .then((response)=>{\n            this.setState({annual_report: response.data})\n        }, err => {\n            // TOAST.pop({message: err.message, type: 'error'})\n        }).finally(()=> \n            this.setState({isLoading: false})\n        )\n    }\n\n    componentDidMount(){\n        const pr = this.props\n        const {id} = this.props.match.params\n        if(id){\n            this.apiRetrieve()\n        } else if(pr.apiRoute){\n            this.apiAnnual()\n        } else {\n            this.apiAverage()\n        }\n    }\n\n    render() {\n        const st = this.state;\n        const data = st.report.length ? [\n            {\n                name: 1, fw: st.report[0].fw1, bw: st.report[0].bw1\n            },\n            {\n                name: 2, fw: st.report[0].fw2, bw: st.report[0].bw2\n            },\n            {\n                name: 3, fw: st.report[0].fw3, bw: st.report[0].bw3\n            },\n            {\n                name: 4, fw: st.report[0].fw4, bw: st.report[0].bw4\n            },\n            {\n                name: 5, fw: st.report[0].fw5, bw: st.report[0].bw5\n            },\n            {\n                name: 6, fw: st.report[0].fw6, bw: st.report[0].bw6\n            },\n            {\n                name: 7, fw: st.report[0].fw7, bw: st.report[0].bw7\n            },\n            {\n                name: 8, fw: st.report[0].fw8, bw: st.report[0].bw8\n            },\n        ] : ''\n        const is_annual = this.props.location.pathname==='/report/print/annual'\n        console.log(st.report, this.props, st)\n        return (\n            <div>\n                <div style={{}}>\n                    <strong style={{fontSize: '24px'}}><span style={{fontSize: '36px'}}>{st.report.length ? st.report[0].name : ''}</span>&nbsp;{st.pageState.start_date ? `(${moment(st.pageState.start_date).format('MMMM DD YYYY')}` : ''} {st.pageState.end_date ? `- ${moment(st.pageState.end_date).format('MMMM DD YYYY')})` : ''}</strong>\n                </div>\n                {is_annual ? \n                    <ResponsiveContainer>\n                        <BarChart\n                            // width={800}\n                            // height={300}\n                            data={st.annual_report}\n                            margin={{\n                            top: 30, right: 15, left: 5, bottom: 15,\n                            }}\n                        >\n                            <XAxis dataKey=\"Month\" tickSize\n                                dy='25'/>\n                            <YAxis />\n                            <CartesianGrid strokeDasharray=\"3 3\" />\n                            <Tooltip />\n                            <Legend />\n                            <Bar dataKey=\"avg_fw\" fill=\"#8884d8\"></Bar>\n                            <Bar dataKey=\"avg_bw\" fill=\"#82ca9d\"/>\n                        </BarChart>\n                    </ResponsiveContainer>:\n                    <ResponsiveContainer>\n                        <BarChart\n                            // width={800}\n                            // height={300}\n                            data={data}\n                            margin={{\n                            top: 30, right: 15, left: 5, bottom: 15,\n                            }}\n                        >\n                            <XAxis dataKey=\"name\" tickSize\n                                dy='25'/>\n                            <YAxis />\n                            <CartesianGrid strokeDasharray=\"3 3\" />\n                            {/* <Tooltip /> */}\n                            <Legend />\n                            <Bar dataKey=\"fw\" fill=\"#8884d8\"></Bar>\n                            <Bar dataKey=\"bw\" fill=\"#82ca9d\"/>\n                        </BarChart>\n                    </ResponsiveContainer>\n                }\n            </div>\n        );\n    }\n}\n\nexport default withRouter(PrintReport);"]},"metadata":{},"sourceType":"module"}