{"ast":null,"code":"import _classCallCheck from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/cdi_5/agri_thesis_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/cdi_5/agri_thesis_front/src/components/App.js\";\nimport React, { Component } from 'react';\nimport { Switch, Route, withRouter } from 'react-router-dom';\nimport Login from './Login';\nimport Main from './Main';\nimport * as Session from '../services/session';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      hasToken: false,\n      isCurrent: false,\n      hasPrevRoute: false\n    };\n\n    _this.handleLogOut = function () {\n      _this.setState(function () {\n        return {\n          hasToken: false\n        };\n      });\n    };\n\n    _this.handleLogin = function () {\n      _this.setState(function () {\n        return {\n          hasToken: true\n        };\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var routeChanged = nextProps.location !== this.props.location;\n      this.setState({\n        hasPrevRoute: routeChanged\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var hasPrevRoute = this.state.hasPrevRoute;\n      var _this$props = this.props,\n          pathname = _this$props.location.pathname,\n          history = _this$props.history;\n      var urls = ['/', '/login', '/register', '/about', '/contact-us', '/users', '/products', '/reports', '/orders'];\n\n      if (Session.getToken()) {\n        this.setState(function () {\n          return {\n            hasToken: true\n          };\n        });\n\n        if (!urls.includes(\"/\".concat(pathname.split('/')[1]))) {\n          if (!urls.includes(\"/\".concat(pathname.split('/')[1], \"s\"))) {\n            // added s to match urls\n            return hasPrevRoute ? history.goBack() : history.push(urls[0]);\n          }\n        }\n\n        if (pathname === '/' || pathname === '/login') {\n          history.push(urls[0]);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var hasToken = this.state.hasToken;\n      return React.createElement(\"div\", {\n        style: {\n          background: '#fff'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/\",\n        render: function render() {\n          return React.createElement(Main, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default withRouter(App);","map":{"version":3,"sources":["/home/cdi_5/agri_thesis_front/src/components/App.js"],"names":["React","Component","Switch","Route","withRouter","Login","Main","Session","App","state","hasToken","isCurrent","hasPrevRoute","handleLogOut","setState","handleLogin","nextProps","routeChanged","location","props","pathname","history","urls","getToken","includes","split","goBack","push","background"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,UAAxB,QAA0C,kBAA1C;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AAEA,OAAO,KAAKC,OAAZ,MAAyB,qBAAzB;;IAEMC,G;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,QAAQ,EAAE,KADJ;AAENC,MAAAA,SAAS,EAAC,KAFJ;AAGNC,MAAAA,YAAY,EAAE;AAHR,K;;UAuCRC,Y,GAAe,YAAM;AACnB,YAAKC,QAAL,CAAc;AAAA,eAAO;AAACJ,UAAAA,QAAQ,EAAE;AAAX,SAAP;AAAA,OAAd;AACD,K;;UACDK,W,GAAc,YAAM;AAClB,YAAKD,QAAL,CAAc;AAAA,eAAO;AAACJ,UAAAA,QAAQ,EAAE;AAAX,SAAP;AAAA,OAAd;AACD,K;;;;;;;8CAtC0BM,S,EAAW;AACpC,UAAIC,YAAY,GAAGD,SAAS,CAACE,QAAV,KAAuB,KAAKC,KAAL,CAAWD,QAArD;AACA,WAAKJ,QAAL,CAAc;AAAEF,QAAAA,YAAY,EAAEK;AAAhB,OAAd;AACD;;;wCAEoB;AAAA,UACXL,YADW,GACM,KAAKH,KADX,CACXG,YADW;AAAA,wBAE0B,KAAKO,KAF/B;AAAA,UAEEC,QAFF,eAEXF,QAFW,CAEEE,QAFF;AAAA,UAEcC,OAFd,eAEcA,OAFd;AAGnB,UAAMC,IAAI,GAAG,CACX,GADW,EAEX,QAFW,EAGX,WAHW,EAIX,QAJW,EAKX,aALW,EAMX,QANW,EAOX,WAPW,EAQX,UARW,EASX,SATW,CAAb;;AAYA,UAAIf,OAAO,CAACgB,QAAR,EAAJ,EAAwB;AACtB,aAAKT,QAAL,CAAc;AAAA,iBAAO;AAACJ,YAAAA,QAAQ,EAAE;AAAX,WAAP;AAAA,SAAd;;AACA,YAAI,CAACY,IAAI,CAACE,QAAL,YAAkBJ,QAAQ,CAACK,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAlB,EAAL,EAAkD;AAChD,cAAI,CAACH,IAAI,CAACE,QAAL,YAAkBJ,QAAQ,CAACK,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAlB,OAAL,EAAmD;AAAE;AACnD,mBAAOb,YAAY,GAAGS,OAAO,CAACK,MAAR,EAAH,GAAsBL,OAAO,CAACM,IAAR,CAAaL,IAAI,CAAC,CAAD,CAAjB,CAAzC;AACD;AACF;;AACD,YAAIF,QAAQ,KAAK,GAAb,IAAoBA,QAAQ,KAAK,QAArC,EAA+C;AAC7CC,UAAAA,OAAO,CAACM,IAAR,CAAaL,IAAI,CAAC,CAAD,CAAjB;AACD;AACF;AACF;;;6BAQQ;AAAA,UACCZ,QADD,GACc,KAAKD,KADnB,CACCC,QADD;AAEP,aACE;AAAK,QAAA,KAAK,EAAE;AAACkB,UAAAA,UAAU,EAAC;AAAZ,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,GAAZ;AAAiB,QAAA,MAAM,EAAE;AAAA,iBACvB,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADuB;AAAA,SAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CADF;AASD;;;;EAzDe3B,S;;AA4DlB,eAAeG,UAAU,CAACI,GAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\r\nimport { Switch, Route, withRouter } from 'react-router-dom'\r\n\r\nimport Login from './Login'\r\nimport Main from './Main';\r\n\r\nimport * as Session from '../services/session'\r\n\r\nclass App extends Component {\r\n  state = {\r\n    hasToken: false,\r\n    isCurrent:false,\r\n    hasPrevRoute: false\r\n  }\r\n\r\n  componentWillReceiveProps (nextProps) {\r\n    var routeChanged = nextProps.location !== this.props.location\r\n    this.setState({ hasPrevRoute: routeChanged })\r\n  }\r\n\r\n  componentDidMount () {\r\n    const { hasPrevRoute } = this.state\r\n    const { location : { pathname }, history } = this.props\r\n    const urls = [\r\n      '/',\r\n      '/login',\r\n      '/register',\r\n      '/about',\r\n      '/contact-us',\r\n      '/users',\r\n      '/products',\r\n      '/reports',\r\n      '/orders'\r\n      \r\n    ]\r\n    if (Session.getToken()) {\r\n      this.setState(() => ({hasToken: true}))\r\n      if (!urls.includes(`/${pathname.split('/')[1]}`)) {\r\n        if (!urls.includes(`/${pathname.split('/')[1]}s`)) { // added s to match urls\r\n          return hasPrevRoute ? history.goBack() : history.push(urls[0])\r\n        }\r\n      }\r\n      if (pathname === '/' || pathname === '/login') {\r\n        history.push(urls[0])\r\n      }\r\n    }\r\n  }\r\n\r\n  handleLogOut = () => {\r\n    this.setState(() => ({hasToken: false}))\r\n  }\r\n  handleLogin = () => {\r\n    this.setState(() => ({hasToken: true}))\r\n  }\r\n  render() {\r\n    const { hasToken } = this.state\r\n    return (\r\n      <div style={{background:'#fff'}}>\r\n        <Switch>\r\n          <Route path=\"/\"  render={() => (\r\n            <Main />\r\n          )}/>\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(App)"]},"metadata":{},"sourceType":"module"}